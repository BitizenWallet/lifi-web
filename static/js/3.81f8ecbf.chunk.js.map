{"version":3,"sources":["components/NotFoundPage.tsx","services/localStorage.ts","services/utils.ts","config/connectors.ts","services/metamask.ts","services/tokenListService.ts","components/LoadingIndicator.tsx","services/notifications.ts","components/Route.tsx","components/ChainSelect.tsx","components/TokenSelect.tsx","components/web3/connectors.ts","components/SwapForm.tsx","assets/icon192.png","services/processRenderer.tsx","components/Clock.tsx","components/Swapping.tsx","assets/wallet.png","components/TransactionsTable.tsx","components/Swap.tsx","components/web3/Web3ConnectionManager.tsx","components/web3/hooks.ts","components/web3/WrappedWeb3ReactProvider.tsx","services/metatags.ts","App.tsx","types/index.ts","types/defaultToken.types.ts","types/internal.types.ts"],"names":["NotFoundPage","style","width","height","className","Title","disabled","position","left","top","transform","isSupported","itemBackup","localStorage","getItem","removeItem","setItem","e","oldRoutes","migrateOldProperties","storeRoute","route","updatedRoutes","storedRoutes","readAllRoutes","length","replaced","map","storedRoute","id","push","JSON","stringify","routeString","parse","sortRoutesByExecutionDate","routes","sort","routeA","routeB","steps","execution","process","startedAt","HISTORICAL_STATI","readHistoricalRoutes","historicalRoutes","filter","every","step","status","includes","readActiveRoutes","activeRoutes","formatTokenAmount","token","amount","formatTokenAmountOnly","symbol","floated","BigNumber","shiftedBy","decimals","isZero","decimalPlaces","absoluteValue","lt","toFixed","deepClone","src","isWalletDeactivated","address","lowerCaseAddress","toLowerCase","deactivatedAddresses","walletsString","readDeactivatedWallets","parseSecondsAsTime","seconds","isNaN","minutes","Math","floor","remainingSeconds","ceil","prefix","customRpc","ChainId","ETH","POL","REACT_APP_RPC_URL_POLYGON","BSC","REACT_APP_RPC_URL_BSC","DAI","REACT_APP_RPC_URL_XDAI","FTM","REACT_APP_RPC_URL_FANTOM","ARB","REACT_APP_RPC_URL_ARBITRUM","ROP","RIN","GOR","KOV","ARBT","OPTT","MUM","BSCT","getRpcs","rpcs","Object","keys","forEach","key","switchChain","chainId","a","ethereum","window","request","method","params","getChainById","metamask","code","addChain","console","error","message","addToken","type","options","image","logoURI","wasAdded","switchChainAndAddToken","prefixChainId","once","parseInt","blacklist","AVA","loadTokenList","chain","tokenlistUrl","axios","get","result","data","findIndex","tokens","loadTokenListAsTokens","tokenList","filteredTokens","filterBlacklistedTokens","mappedTokens","name","replace","coinKey","defaultTokens","defaultToken","find","unshift","LoadingIndicator","NotificationType","element","useRef","bubbleStyle","background","display","margin","borderRadius","useEffect","animate","current","childNodes","y","opacity","delay","stagger","duration","repeat","Infinity","easing","ref","Route","selected","onSelect","log","formatToolName","toolKey","tool","findTool","parseStepShort","action","toToken","estimate","toAmount","aggregatedDuration","reduce","executionDuration","parsedDuration","padding","paddingTop","paddingBottom","marginTop","marginBottom","onClick","textAlign","toAmountUSD","gasCostUSD","progressDot","size","direction","title","description","fromToken","fromAmount","fromChainId","toChainId","paddingLeft","includedSteps","line","index","parseStep","Step","ChainSelect","transferChains","selectedChain","onChangeSelectedChain","syncStatus","getChainByKey","undefined","alt","placeholder","value","onChange","v","dropdownStyle","minWidth","bordered","optionLabelProp","OptGroup","label","Option","synced","role","marginRight","color","text","TokenSelect","balances","selectedToken","onChangeSelectedToken","selectReference","grayed","showBalance","web3","useWeb3React","chainKey","tokenId","Error","findToken","showSearch","select","filterOption","input","option","indexOf","account","gt","amountRendered","eq","getRpcUrl","rpcUrls","injected","InjectedConnector","supportedChainIds","supportedChains","getInjectedConnector","currentProvider","providers","Web3Provider","getNetwork","chains","network","NetworkConnector","urls","fromEntries","defaultChainId","SwapForm","depositChain","setDepositChain","depositToken","setDepositToken","depositAmount","setDepositAmount","withdrawChain","setWithdrawChain","withdrawToken","setWithdrawToken","setWithdrawAmount","withdrawAmount","estimatedWithdrawAmount","estimatedMinWithdrawAmount","allowSameChains","forceSameToken","depositSelectRef","withdrawSelectRef","useState","depositAmountString","setDepositAmountString","activate","connectWallet","getBalance","tokenAddress","tokenBalance","portfolio","gte","gutter","xs","sm","span","defaultValue","min","event","currentTarget","lte","setMaxDeposit","blur","balance","justify","SwapOutlined","activateNotifications","Notification","requestPermission","permission","getNotificationContents","dir","badge","alwaysShow","SWAP_SUCCESSFUL","SWAP_ERROR","CROSS_SUCCESSFUL","CROSS_ERROR","TRANSACTION_SUCCESSFULL","TRANSACTION_ERROR","serviceExport","showNotification","visibilityOverride","document","hidden","renderProcessMessage","txLink","toString","confirmations","href","target","rel","renderConfirmations","renderProcessError","errorMessage","substring","htmlMessage","htmlErrorMessage","dangerouslySetInnerHTML","__html","count","max","backgroundColor","Clock","successAt","failedAt","Date","now","setCount","intervalRef","setInterval","clearInterval","total","renderTime","getFinalBalance","lastStep","getReceivingInfo","LiFi","getTokenBalance","toChain","Swapping","updateRoute","onSwapDone","isMobile","useMediaQuery","query","swapStartedAt","setSwapStartedAt","swapDoneAt","setSwapDoneAt","isSwapping","setIsSwapping","alerts","finalTokenAmount","setFinalTokenAmount","allDone","isFailed","some","alreadyStarted","resumeExecution","moveExecutionToBackground","getChainAvatar","getAvatar","startCrossChainSwap","library","signer","getSigner","settings","updateCallback","switchChainHook","executeRoute","warn","resumeRoute","restartCrossChainSwap","pop","requiredChainId","getChainId","updatedRoute","currentProcess","getCurrentProcess","mode","executionSteps","processList","hasFailed","isLastPendingProcess","Text","maxWidth","whiteSpace","marginLeft","doneAt","parseExecution","isDone","isLoading","isPaused","Item","ArrowRightOutlined","dot","LoadingOutlined","PauseCircleOutlined","isCrossChainSwap","isCrossStep","isLifiStep","receivedAmount","successMessage","fontSize","strong","constants","AddressZero","cursor","getMainButton","indicator","getStateText","TrasactionsTable","currentRouteCallId","startParams","selectRoute","deleteRoute","historical","active","login","renderActionButton","danger","shape","DeleteOutlined","onConfirm","okText","okType","cancelText","icon","LoginOutlined","firstStep","startedDate","toLocaleString","date","fromChain","protocols","join","state","columns","dataIndex","dataSource","pagination","hideOnSinglePage","history","createBrowserHistory","Panel","Collapse","parseChain","passed","values","ChainKey","toUpperCase","parseToken","transferTokens","coinKeys","CoinKey","findDefaultToken","fromTokenId","ethers","utils","getAddress","trim","Swap","filterDefaultTokenByChains","search","newFromChain","newToChain","defaultParams","QueryString","ignoreQueryPrefix","newFromChainId","foundToken","inDefault","newAmount","newToChainId","toTokenId","getDefaultParams","location","setStateUpdate","fromChainKey","setFromChainKey","fromTokenAddress","setFromTokenAddress","toChainKey","setToChainKey","toTokenAddress","setToTokenAddress","setTokens","refreshTokens","setRefreshTokens","setBalances","refreshBalances","setRefreshBalances","routeCallResult","setRouteCallResult","optionSlippage","setOptionSlippage","optionInfiniteApproval","setOptionInfiniteApproval","optionEnabledBridges","setOptionEnabledBridges","availableBridges","setAvailableBridges","optionEnabledExchanges","setOptionEnabledExchanges","availableExchanges","setAvailableExchanges","setRoutes","routesLoading","setRoutesLoading","noRoutesAvailable","setNoRoutesAvailable","selectedRoute","setSelectedRoute","highlightedIndex","setHighlightedIndex","setActiveRoutes","setHistoricalRoutes","restartedOnPageLoad","setRestartedOnPageLoad","balancePollingStarted","setBalancePollingStarted","routeCards","showRoutesable","setShowRoutesable","routeFailed","actionRequired","pollingInterval","load","setConfig","apiUrl","defaultRouteOptions","integrator","getPossibilities","possibilities","bridges","bridge","bridgeTool","split","allBridges","Array","from","Set","exchanges","exchange","exchangeTool","allExchanges","newTokens","item","updateTokenData","getToken","then","updatedToken","priceUSD","getSelectedWithdraw","toAmountMin","walletChainIsSupported","assign","stateUpdate","updateBalances","useCallback","entries","getTokenBalances","currentBalances","tokenAmount","getTransferRoutes","fromAddress","toAddress","slippage","allow","uuid","getRoutes","setTimeout","nodes","defaultActiveKey","ghost","overflowX","header","stopExecution","formatter","parser","parseFloat","checked","flexDirection","visible","onOk","onCancel","destroyOnClose","footer","htmlType","SyncOutlined","spin","requiredAmount","gasCosts","b","plus","hasSufficientGasBalanceOnStartChain","isSwapStep","crossChain","gasEstimate","hasSufficientGasBalanceOnCrossChain","submitButton","Web3ConnectionManager","children","connector","triedEager","deactivate","tried","setTried","eagerConnect","currentlySelectedUserAddress","selectedAddress","isAuthorized","catch","useEagerConnect","suppress","on","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","getLibrary","provider","WrappedWeb3ReactProvider","CLASS_NAME","head","querySelector","updateMetaTags","tags","og","url","w","h","documentElement","lang","addMetaTag","forcedLanguage","createLinkTag","addCanonicalUrlTag","statusCode","noIndex","prerenderHeader","querySelectorAll","elm","remove","append","addTagsToDOM","content","propertyTag","createMetaTag","tag","createElement","setAttribute","hreflang","setMetatags","defaultValues","getTransferChains","jsonArraySting","App","path","usePageViews","exact","to","render","USDC","USDT","MATIC","WBTC","BNB","OPT","ONE","AVAX","MOR","MOVR","OKT","HEC","HT","TEST","ONET","Currencies","supportedExchanges","supportedExchangeAggregators","supportedBridges"],"mappings":"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","file":"static/js/3.81f8ecbf.chunk.js","sourcesContent":["import { Typography } from 'antd'\nimport { Content } from 'antd/lib/layout/layout'\nimport React from 'react'\n\nfunction NotFoundPage() {\n  return (\n    <Content style={{ width: '100vw', height: 'calc(100vh - 64px)' }} className=\"site-layout\">\n      <Typography.Title\n        disabled\n        style={{\n          position: 'absolute',\n          left: '50%',\n          top: '50%',\n          transform: 'translate(-50%, -50%)',\n        }}>\n        Not Found\n      </Typography.Title>\n    </Content>\n  )\n}\n\nexport default NotFoundPage\n","import { Route, Status } from '../types'\n\nconst isSupported = () => {\n  try {\n    var itemBackup = localStorage.getItem('')\n    localStorage.removeItem('')\n    if (itemBackup === null) localStorage.removeItem('')\n    else localStorage.setItem('', itemBackup)\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\n// TODO: Migrating old localStorage key. Can be removed after being deployed for a while (deployed on 17.12.2021)\nconst migrateOldProperties = () => {\n  if (!isSupported()) return\n  const alreadyMigrated = localStorage.getItem('routes')\n  if (alreadyMigrated) return\n\n  const oldRoutes = localStorage.getItem('activeRoute')\n  if (oldRoutes) {\n    localStorage.setItem('routes', oldRoutes)\n  }\n  localStorage.removeItem('activeRoute')\n}\n\nmigrateOldProperties()\n\nconst clearLocalStorage = () => {\n  if (isSupported()) {\n    localStorage.clear()\n  }\n}\n\nconst storeWallets = (wallets: Array<string>) => {\n  if (isSupported()) {\n    const lowerCaseWallets = wallets.map((address) => address.toLowerCase())\n    localStorage.setItem('wallets', JSON.stringify(Array.from(new Set(lowerCaseWallets))))\n  }\n}\n\nconst readWallets = (): Array<string> => {\n  if (!isSupported()) {\n    return []\n  }\n  const walletsString = localStorage.getItem('wallets')\n  if (walletsString) {\n    try {\n      return JSON.parse(walletsString)\n    } catch (e) {\n      return []\n    }\n  } else {\n    return []\n  }\n}\n\nconst storeDeactivatedWallets = (wallets: string[]) => {\n  if (isSupported()) {\n    const lowerCaseWallets = wallets.map((address) => address.toLowerCase())\n    localStorage.setItem(\n      'deactivatedWallets',\n      JSON.stringify(Array.from(new Set(lowerCaseWallets))),\n    )\n  }\n}\n\nconst readDeactivatedWallets = (): Array<string> => {\n  if (!isSupported()) {\n    return []\n  }\n  const walletsString = localStorage.getItem('deactivatedWallets')\n  if (walletsString) {\n    try {\n      return JSON.parse(walletsString)\n    } catch (e) {\n      return []\n    }\n  } else {\n    return []\n  }\n}\n\nconst storeHideDisconnectPopup = (shouldHide: boolean) => {\n  if (!isSupported()) return\n  localStorage.setItem('hideDisconnetPopup', JSON.stringify(shouldHide))\n}\n\nconst readHideDisconnectPopup = (): boolean => {\n  if (!isSupported()) return false\n  const shouldHideString = localStorage.getItem('hideDisconnetPopup')\n  return JSON.parse(shouldHideString as string) === true\n}\n\nconst storeHideAbout = (hide: boolean) => {\n  if (isSupported()) {\n    localStorage.setItem('nxtpHideDemo', hide ? 'true' : 'false')\n  }\n}\n\nconst readHideAbout = () => {\n  if (!isSupported()) {\n    return true\n  }\n  const value = localStorage.getItem('nxtpHideDemo')\n  return !(value === 'false')\n}\n\nconst storeRoute = (route: Route) => {\n  if (!isSupported()) return\n  const storedRoutes = readAllRoutes()\n  let updatedRoutes: Route[]\n  if (!storedRoutes.length) {\n    updatedRoutes = [route]\n  } else {\n    let replaced = false\n    updatedRoutes = storedRoutes.map((storedRoute) => {\n      if (storedRoute.id === route.id) {\n        storedRoute = route\n        replaced = true\n      }\n      return storedRoute\n    })\n    if (!replaced) {\n      updatedRoutes.push(route)\n    }\n  }\n\n  localStorage.setItem('routes', JSON.stringify(updatedRoutes))\n}\n\nconst deleteRoute = (route: Route) => {\n  if (!isSupported() || !route) {\n    return\n  }\n  const storedRoutes = readAllRoutes()\n  const updatedRoutes = storedRoutes.filter((storedRoute) => storedRoute.id !== route.id)\n\n  localStorage.setItem('routes', JSON.stringify(updatedRoutes))\n}\n\nconst readAllRoutes = (): Array<Route> => {\n  if (!isSupported()) {\n    return [] as Array<Route>\n  }\n  const routeString = localStorage.getItem('routes')\n\n  if (routeString) {\n    try {\n      const routes = JSON.parse(routeString) as Array<Route>\n      return routes as Array<Route>\n    } catch (e) {\n      return [] as Array<Route>\n    }\n  } else {\n    return [] as Array<Route>\n  }\n}\n\nconst sortRoutesByExecutionDate = (routes: Route[]): Route[] =>\n  routes.sort((routeA, routeB) => {\n    if (!routeA.steps[0].execution?.process.length) {\n      return -1 // A doesn't have an execution, so move it to the top of the list\n    }\n    if (!routeB.steps[0].execution?.process.length) {\n      return 1 // B doesn't have an execution, so move it to the top of the list\n    }\n\n    return (\n      routeB.steps[0].execution.process[0].startedAt -\n      routeA.steps[0].execution.process[0].startedAt\n    )\n  })\n\nconst HISTORICAL_STATI: Status[] = ['DONE', 'CANCELLED']\n\nconst readHistoricalRoutes = (): Array<Route> => {\n  if (!isSupported()) {\n    return [] as Array<Route>\n  }\n  const routes = readAllRoutes()\n  const historicalRoutes = routes.filter((route) =>\n    route.steps.every(\n      (step) => step.execution?.status && HISTORICAL_STATI.includes(step.execution.status),\n    ),\n  )\n  return sortRoutesByExecutionDate(historicalRoutes)\n}\n\nconst readActiveRoutes = (): Array<Route> => {\n  if (!isSupported()) {\n    return [] as Array<Route>\n  }\n  const routes = readAllRoutes()\n  const activeRoutes = routes.filter(\n    (route) =>\n      !route.steps.every(\n        (step) => step.execution?.status && HISTORICAL_STATI.includes(step.execution.status),\n      ),\n  )\n\n  return sortRoutesByExecutionDate(activeRoutes)\n}\n\nexport {\n  clearLocalStorage,\n  deleteRoute,\n  isSupported,\n  readActiveRoutes,\n  readDeactivatedWallets,\n  readHideAbout,\n  readHideDisconnectPopup,\n  readHistoricalRoutes,\n  readWallets,\n  sortRoutesByExecutionDate,\n  storeDeactivatedWallets,\n  storeHideAbout,\n  storeHideDisconnectPopup,\n  storeRoute,\n  storeWallets,\n}\n","import BigNumber from 'bignumber.js'\n\nimport { Token } from '../types'\nimport { readDeactivatedWallets } from './localStorage'\n\nexport const formatTokenAmount = (token: Token, amount: string | undefined) => {\n  if (!amount) {\n    return '- ' + token.symbol\n  }\n\n  return formatTokenAmountOnly(token, amount) + ' ' + token.symbol\n}\n\nexport const formatTokenAmountOnly = (token: Token, amount: string | BigNumber | undefined) => {\n  if (!amount) {\n    return '0.0'\n  }\n\n  let floated\n  if (typeof amount === 'string') {\n    if (amount === '0') {\n      return '0.0'\n    }\n\n    floated = new BigNumber(amount).shiftedBy(-token.decimals)\n  } else {\n    floated = amount\n\n    if (floated.isZero()) {\n      return '0.0'\n    }\n  }\n\n  // show at least 4 decimal places and at least two non-zero digests\n  let decimalPlaces = 3\n  // since values can in theory be negative we need to use the absolute value to determine the decimal places\n  while (floated.absoluteValue().lt(1 / 10 ** decimalPlaces)) decimalPlaces++\n  return floated.toFixed(decimalPlaces + 1, 1)\n}\n\nexport const deepClone = (src: any) => {\n  return JSON.parse(JSON.stringify(src))\n}\n\nexport const sleep = (mills: number) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, mills)\n  })\n}\n\nexport const isWalletDeactivated = (address: string | null | undefined): boolean => {\n  if (!address) return false\n  const lowerCaseAddress = address.toLowerCase()\n  const deactivatedWallets = readDeactivatedWallets()\n  const deactivatedAddresses = deactivatedWallets.map((address) => address.toLowerCase())\n  return deactivatedAddresses.includes(lowerCaseAddress)\n}\n\n/**\n * Parses seconds as time string in the format \"02:25\"\n * @param seconds\n */\nexport const parseSecondsAsTime = (seconds: number): string => {\n  if (isNaN(seconds) || seconds < 0) {\n    return ' - '\n  }\n  const minutes = Math.floor(seconds / 60)\n  const remainingSeconds = Math.ceil(seconds % 60)\n  const prefix = remainingSeconds < 10 ? '0' : ''\n  return `${minutes}:${prefix}${remainingSeconds}`\n}\n","import { ChainId } from '@lifinance/sdk'\n\nimport { deepClone } from '../services/utils'\n\nconst customRpc: Record<number, (string | undefined)[]> = {\n  [ChainId.ETH]: [process.env.REACT_APP_RPC_URL_MAINNET],\n  [ChainId.POL]: [process.env.REACT_APP_RPC_URL_POLYGON],\n  [ChainId.BSC]: [process.env.REACT_APP_RPC_URL_BSC],\n  [ChainId.DAI]: [process.env.REACT_APP_RPC_URL_XDAI],\n  [ChainId.FTM]: [process.env.REACT_APP_RPC_URL_FANTOM],\n  [ChainId.ARB]: [process.env.REACT_APP_RPC_URL_ARBITRUM],\n\n  // Testnet\n  [ChainId.ROP]: [process.env.REACT_APP_RPC_URL_ROPSTEN],\n  [ChainId.RIN]: [process.env.REACT_APP_RPC_URL_RINKEBY],\n  [ChainId.GOR]: [process.env.REACT_APP_RPC_URL_GORLI],\n  [ChainId.KOV]: [process.env.REACT_APP_RPC_URL_KOVAN],\n  [ChainId.ARBT]: [process.env.REACT_APP_RPC_URL_ARBITRUM_RINKEBY],\n  [ChainId.OPTT]: [process.env.REACT_APP_RPC_URL_OPTIMISM_KOVAN],\n  [ChainId.MUM]: [process.env.REACT_APP_RPC_URL_POLYGON_MUMBAI],\n  [ChainId.BSCT]: [process.env.REACT_APP_RPC_URL_BSC_TESTNET],\n}\n\nexport const getRpcs = (): Record<number, string[]> => {\n  const rpcs = deepClone(customRpc)\n  Object.keys(rpcs).forEach((key) => {\n    if (!rpcs[key] || !rpcs[key].length || !rpcs[key][0]) {\n      delete rpcs[key]\n    }\n  })\n\n  return rpcs\n}\n","/* eslint-disable no-console */\nimport { getChainById, prefixChainId, Token } from '../types'\n\nexport const switchChain = async (chainId: number) => {\n  const ethereum = (window as any).ethereum\n  if (typeof ethereum === 'undefined') return false\n\n  try {\n    await ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: getChainById(chainId).metamask?.chainId }],\n    })\n    return true\n  } catch (error: any) {\n    // const ERROR_CODE_UNKNOWN_CHAIN = 4902\n    const ERROR_CODE_USER_REJECTED = 4001\n    if (error.code !== ERROR_CODE_USER_REJECTED) {\n      return await addChain(chainId)\n    }\n  }\n  return false\n}\n\nexport const addChain = async (chainId: number) => {\n  const ethereum = (window as any).ethereum\n  if (typeof ethereum === 'undefined') return false\n\n  const params = getChainById(chainId).metamask\n  try {\n    await ethereum.request({\n      method: 'wallet_addEthereumChain',\n      params: [params],\n    })\n    return true\n  } catch (error: any) {\n    console.error(`Error adding chain ${chainId}: ${error.message}`)\n  }\n  return false\n}\n\nexport const addToken = async (token: Token) => {\n  try {\n    // wasAdded is a boolean. Like any RPC method, an error may be thrown.\n    const wasAdded = await (window as any).ethereum.request({\n      method: 'wallet_watchAsset',\n      params: {\n        type: 'ERC20', // Initially only supports ERC20, but eventually more!\n        options: {\n          address: token.address, // The address that the token is at.\n          symbol: token.symbol, // A ticker symbol or shorthand, up to 5 chars.\n          decimals: token.decimals, // The number of decimals in the token\n          image: token.logoURI, // A string url of the token logo\n        },\n      },\n    })\n    return wasAdded\n  } catch (error) {\n    console.error(error)\n  }\n  return false\n}\n\nexport const switchChainAndAddToken = async (chainId: number, token: Token) => {\n  const ethereum = (window as any).ethereum\n  const chainIdPrefixed = prefixChainId(chainId)\n\n  if (chainIdPrefixed !== ethereum.chainId) {\n    await switchChain(chainId)\n    ethereum.once('networkChanged', async (id: string) => {\n      if (parseInt(id) === chainId) {\n        await addToken(token)\n      }\n    })\n  } else {\n    await addToken(token)\n  }\n}\n","import axios from 'axios'\n\nimport { ChainId, CoinKey, defaultTokens, getChainById, Token } from '../types'\n\nexport interface TokenListToken {\n  chainId: number\n  address: string\n  name: string\n  symbol: string\n  decimals: number\n  logoURI: string\n}\n\nconst blacklist: Record<number, string[]> = {\n  [ChainId.AVA]: ['0x4e1581f01046efdd7a1a2cdb0f82cdd7f71f2e59'],\n}\n\nexport const loadTokenList = async (chainId: number): Promise<Array<TokenListToken>> => {\n  const chain = getChainById(chainId)\n  if (!chain.tokenlistUrl) {\n    // throw new Error('No token list defined for chain')\n    return [] as Array<TokenListToken>\n  }\n  const result = await axios.get<any>(chain.tokenlistUrl)\n  if (result.data) {\n    if (Object.keys(result.data).findIndex((key) => key === 'tokens') === -1) {\n      return result.data as Array<TokenListToken>\n    } else {\n      return result.data.tokens as Array<TokenListToken>\n    }\n  } else {\n    return [] as Array<TokenListToken>\n  }\n}\n\nexport const loadTokenListAsTokens = async (chainId: number): Promise<Array<Token>> => {\n  const chain = getChainById(chainId)\n  const tokenList = await loadTokenList(chainId)\n  const filteredTokens = tokenList ? tokenList.filter((token) => token.chainId === chainId) : []\n  const filterBlacklistedTokens = filteredTokens.filter(\n    (token) =>\n      !blacklist[token.chainId] || !blacklist[token.chainId].includes(token.address.toLowerCase()),\n  )\n  const mappedTokens = filterBlacklistedTokens.map((token) => {\n    return {\n      address: token.address.toLowerCase(),\n      symbol: token.symbol,\n      decimals: token.decimals,\n      chainId: token.chainId,\n      name: token.name.replace(' on xDai', ''),\n      logoURI: token.logoURI,\n\n      coinKey: token.symbol as CoinKey,\n    } as Token\n  })\n\n  // default token\n  defaultTokens[chain.key].forEach((defaultToken) => {\n    const found = !!mappedTokens.find(\n      (token) => token.address.toLowerCase() === defaultToken.address.toLowerCase(),\n    )\n    if (!found) {\n      mappedTokens.unshift(defaultToken)\n    }\n  })\n\n  return mappedTokens\n}\n","import { animate, stagger } from 'motion'\nimport { useEffect, useRef } from 'react'\n\nfunction LoadingIndicator() {\n  const element = useRef<HTMLDivElement | null>(null)\n\n  const bubbleStyle: React.CSSProperties = {\n    background: '#05A17D',\n    display: 'inline-block',\n    margin: 10,\n    width: 14,\n    height: 14,\n    borderRadius: 7,\n  }\n\n  useEffect(() => {\n    //normal animation\n    animate(\n      element.current?.childNodes as NodeListOf<Element>,\n      {\n        y: [0, -5, 0],\n        opacity: [1, 0.8, 1],\n      },\n      {\n        delay: stagger(0.1),\n        duration: 1,\n        repeat: Infinity,\n        easing: 'ease-in-out',\n      },\n    )\n  }, [])\n\n  return (\n    <div ref={element}>\n      <div style={bubbleStyle}></div>\n      <div style={bubbleStyle}></div>\n      <div style={bubbleStyle}></div>\n      <div style={bubbleStyle}></div>\n    </div>\n  )\n}\n\nexport default LoadingIndicator\n","import lifiIcon from '../assets/icon192.png'\n\nexport enum NotificationType {\n  SWAP_SUCCESSFUL,\n  CROSS_SUCCESSFUL,\n  SWAP_ERROR,\n  CROSS_ERROR,\n  TRANSACTION_SUCCESSFULL,\n  TRANSACTION_ERROR,\n}\n\nconst notificationsSupported = (): boolean => {\n  if (!('Notification' in window)) {\n    // eslint-disable-next-line no-console\n    console.log('This browser does not support desktop notification')\n    return false\n  }\n  return true\n}\n\nconst activateNotifications = async (): Promise<NotificationPermission> => {\n  // if(Notification.permission === \"granted\") return\n  if (notificationsSupported()) {\n    await Notification.requestPermission()\n    return Notification.permission\n  }\n  return 'denied'\n}\n\nconst getNotificationContents = (\n  type: NotificationType,\n): { title: string; options: NotificationOptions; alwaysShow: boolean } => {\n  let title: string = ''\n  let options: NotificationOptions = {\n    dir: 'auto',\n    // icon: lifiIcon,\n    badge: lifiIcon,\n  }\n  let alwaysShow = false\n  switch (type) {\n    case NotificationType.SWAP_SUCCESSFUL:\n      title = 'Swap Successful!'\n      break\n    case NotificationType.SWAP_ERROR:\n      title = 'Swap Failed!'\n      alwaysShow = true\n      break\n    case NotificationType.CROSS_SUCCESSFUL:\n      title = 'Cross Chain Transfer Successful!'\n      break\n    case NotificationType.CROSS_ERROR:\n      title = 'Cross Chain Transfer Failed!'\n      alwaysShow = true\n      break\n    case NotificationType.TRANSACTION_SUCCESSFULL:\n      title = 'Transaction Successful!'\n      alwaysShow = true // intended for entire transaction containing multiple swaps / crosses. It makes sense to always inform user about this, no matter the page visibility\n      break\n    case NotificationType.TRANSACTION_ERROR:\n      title = 'Transaction Failed!'\n      alwaysShow = true\n      break\n    default:\n      break\n  }\n\n  return { title, options, alwaysShow }\n}\n\nconst showNotification = (type: NotificationType, visibilityOverride = false) => {\n  if (Notification.permission === 'denied') return\n  const { title, options, alwaysShow } = getNotificationContents(type)\n  if (document.hidden || alwaysShow || visibilityOverride) {\n    new Notification(title, options)\n  }\n}\n\nconst serviceExport = {\n  activateNotifications,\n  showNotification,\n}\nexport default serviceExport\n","import { Button, Steps } from 'antd'\n\nimport { formatTokenAmount, parseSecondsAsTime } from '../services/utils'\nimport { findTool, getChainById, Route as RouteType, Step } from '../types'\n\ninterface RouteProps {\n  route: RouteType\n  selected: boolean\n  onSelect: Function\n}\n\nconst Route = ({ route, selected, onSelect }: RouteProps) => {\n  // eslint-disable-next-line no-console\n  console.log('route', route)\n\n  const formatToolName = (toolKey: string) => {\n    const tool = findTool(toolKey)\n    if (tool) {\n      return tool.name\n    } else {\n      return toolKey\n    }\n  }\n\n  const parseStepShort = (step: Step) => {\n    switch (step.type) {\n      case 'swap':\n        return (\n          <>\n            Swap to {formatTokenAmount(step.action.toToken, step.estimate.toAmount)} via{' '}\n            {formatToolName(step.tool)}\n          </>\n        )\n      case 'cross':\n        return (\n          <>\n            Transfer to {formatTokenAmount(step.action.toToken, step.estimate.toAmount)} via{' '}\n            {formatToolName(step.tool)}\n          </>\n        )\n      default:\n        // eslint-disable-next-line no-console\n        console.error('invalid short step')\n        return <></>\n    }\n  }\n\n  const parseStep = (step: Step) => {\n    const { action, estimate } = step\n    switch (step.type) {\n      case 'swap':\n        return {\n          title: 'Swap Tokens',\n          description: `${formatTokenAmount(\n            action.fromToken,\n            estimate.fromAmount,\n          )} for ${formatTokenAmount(action.toToken, estimate.toAmount)} via ${formatToolName(\n            step.tool,\n          )}`,\n        }\n      case 'cross':\n        return {\n          title: 'Cross Chains',\n          description: `${getChainById(action.fromChainId).name}: ${formatTokenAmount(\n            action.fromToken,\n            estimate.fromAmount,\n          )} to ${getChainById(action.toChainId).name}: ${formatTokenAmount(\n            action.toToken,\n            estimate.toAmount,\n          )} via ${formatToolName(step.tool)}`,\n        }\n      case 'lifi':\n        return {\n          title: 'LiFi Contract',\n          description: (\n            <>\n              Single transaction including:\n              <br />\n              <ol style={{ paddingLeft: 22 }}>\n                {step.includedSteps.map(parseStepShort).map((line, index) => (\n                  <li key={index}>{line}</li>\n                ))}\n              </ol>\n            </>\n          ),\n        }\n      default:\n        return {\n          title: 'Invalid Step',\n          description: '',\n        }\n    }\n  }\n\n  const aggregatedDuration = route.steps.reduce<number>(\n    (duration, step) => duration + step.estimate?.executionDuration || 1,\n    0,\n  )\n\n  const parsedDuration = parseSecondsAsTime(aggregatedDuration)\n\n  return (\n    <div\n      className={'swap-route ' + (selected ? 'optimal' : '')}\n      style={{\n        padding: 24,\n        paddingTop: 24,\n        paddingBottom: 24,\n        marginTop: 10,\n        marginBottom: 10,\n      }}\n      onClick={() => onSelect()}>\n      {/* {selected ? (\n        <div className=\"selected-label\">Selected</div>\n      ) : (\n        <Button shape=\"round\" type=\"text\" size={'large'} onClick={() => onSelect()}>\n          Click To Select Route\n        </Button>\n      )} */}\n\n      <h5>Token</h5>\n\n      <div className=\"selected\">\n        <div className=\"dataRow background-z2\">\n          <div className=\"value\">\n            <b className=\"vi-hightlight\">{formatTokenAmount(route.toToken, route.toAmount)}</b>\n            {/* <div className='miniText' >≈$ {route.toAmountUSD}</div> */}\n          </div>\n          <span className=\"title\">Estimated token</span>\n        </div>\n\n        <div style={{ textAlign: 'left' }}>\n          <div className=\"dataRow-horizontal\">\n            <span className=\"title \">Estimated result</span>\n            <div className=\"value\">$ {route.toAmountUSD}</div>\n          </div>\n\n          <div className=\"dataRow-horizontal\">\n            <div className=\"value \">$ {route.gasCostUSD}</div>\n            <span className=\"title \">Estimated gas costs</span>\n          </div>\n\n          <div className=\"dataRow-horizontal\">\n            <div className=\"value \">{parsedDuration} min</div>\n            <span className=\"title \">Estimated duration</span>\n          </div>\n        </div>\n      </div>\n\n      <hr />\n\n      <h5>Steps</h5>\n\n      <Steps\n        progressDot\n        size=\"small\"\n        direction=\"vertical\"\n        current={5}\n        className=\"progress-step-list\">\n        {route.steps.map((step) => {\n          let { title, description } = parseStep(step)\n          return <Steps.Step key={title} title={title} description={description}></Steps.Step>\n        })}\n      </Steps>\n    </div>\n  )\n}\n\nexport default Route\n","import { SubgraphSyncRecord } from '@connext/nxtp-sdk'\nimport { Avatar, Badge, Select } from 'antd'\nimport React from 'react'\n\nimport { Chain, ChainKey, getChainByKey } from '../types'\n\ninterface ChainSelectProps {\n  transferChains: Array<Chain>\n  selectedChain?: ChainKey\n  onChangeSelectedChain: Function\n  syncStatus?: Record<number, SubgraphSyncRecord>\n}\n\nconst ChainSelect = ({\n  transferChains,\n  selectedChain,\n  onChangeSelectedChain,\n  syncStatus,\n}: ChainSelectProps) => {\n  const chain = selectedChain ? getChainByKey(selectedChain) : undefined\n\n  return (\n    <>\n      {chain ? (\n        <Avatar size=\"small\" src={chain.logoURI} alt={chain.name}>\n          {chain.name[0]}\n        </Avatar>\n      ) : (\n        ''\n      )}\n\n      <Select\n        placeholder=\"Select Chain\"\n        value={selectedChain}\n        onChange={(v: ChainKey) => onChangeSelectedChain(v)}\n        dropdownStyle={{ minWidth: 300 }}\n        bordered={false}\n        optionLabelProp=\"data-label\">\n        <Select.OptGroup label=\"Supported Chains\">\n          {transferChains.map((chain) => (\n            <Select.Option\n              key={chain.key}\n              value={chain.key}\n              data-label={\n                chain.name + (syncStatus && !syncStatus[chain.id].synced ? ' (Unsynced)' : '')\n              }\n              disabled={syncStatus && !syncStatus[chain.id].synced}>\n              <div className=\"option-item\">\n                <span role=\"img\" aria-label={chain.name}>\n                  <Avatar\n                    size=\"small\"\n                    src={chain.logoURI}\n                    alt={chain.key}\n                    style={{ marginRight: 10 }}>\n                    {chain.name[0]}\n                  </Avatar>\n                </span>\n                <span className=\"option-name\">{chain.name}</span>\n                <span className=\"option-balance\">\n                  {syncStatus && (\n                    <Badge\n                      color={syncStatus[chain.id].synced ? 'green' : 'orange'}\n                      text={syncStatus[chain.id].synced ? 'synced' : 'unsynced'}\n                    />\n                  )}\n                </span>\n              </div>\n            </Select.Option>\n          ))}\n        </Select.OptGroup>\n      </Select>\n    </>\n  )\n}\n\nexport default ChainSelect\n","import { Web3Provider } from '@ethersproject/providers'\nimport { useWeb3React } from '@web3-react/core'\nimport { Avatar, Select } from 'antd'\nimport { RefSelectProps } from 'antd/lib/select'\nimport React from 'react'\n\nimport { ChainKey, TokenAmount, TokenWithAmounts } from '../types'\n\ninterface TokenSelectProps {\n  tokens: { [ChainKey: string]: Array<TokenWithAmounts> }\n  balances: { [ChainKey: string]: Array<TokenAmount> } | undefined\n  selectedChain?: ChainKey\n  selectedToken: string | undefined\n  onChangeSelectedToken: Function\n  selectReference: React.MutableRefObject<RefSelectProps | undefined>\n  grayed: boolean\n  showBalance?: boolean\n}\n\nconst TokenSelect = ({\n  tokens,\n  balances,\n  selectedChain,\n  selectedToken,\n  onChangeSelectedToken,\n  selectReference,\n  grayed,\n  showBalance = true,\n}: TokenSelectProps) => {\n  const findToken = (chainKey: ChainKey, tokenId: string) => {\n    const token = tokens[chainKey].find((token) => token.address === tokenId)\n    if (!token) {\n      throw new Error('Token not found')\n    }\n    return token\n  }\n\n  const web3 = useWeb3React<Web3Provider>()\n  const token = selectedToken && selectedChain ? findToken(selectedChain, selectedToken) : undefined\n\n  return (\n    <>\n      <Avatar size=\"small\" src={token?.logoURI} alt={token?.name}>\n        {token ? token.name : '?'}\n      </Avatar>\n      <Select\n        placeholder=\"Select Coin\"\n        value={selectedToken}\n        onChange={(v) => onChangeSelectedToken(v)}\n        optionLabelProp=\"data-label\"\n        bordered={false}\n        dropdownStyle={{ minWidth: 300 }}\n        showSearch\n        ref={(select) => {\n          if (select) {\n            selectReference.current = select\n          }\n        }}\n        filterOption={(input, option) => {\n          return ((option?.label as string) || '').toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }}>\n        {/* Separate between Owned and All token if more than 6 */}\n        {selectedChain && tokens[selectedChain]?.length > 6 && (\n          <Select.OptGroup label=\"Owned Token\">\n            {!web3.account && (\n              <Select.Option key=\"Select Coin\" value=\"connect\">\n                Connect your wallet\n              </Select.Option>\n            )}\n            {balances && balances[selectedChain] && balances[selectedChain]?.length === 0 && (\n              <Select.Option key=\"No Owned\" value=\"no\" disabled={true}>\n                You don't own any token on this chain.\n              </Select.Option>\n            )}\n            {balances &&\n              balances[selectedChain] &&\n              tokens[selectedChain]\n                .filter((token) => token.amount?.gt(0))\n                .map((token) => (\n                  <Select.Option\n                    key={'own_' + token.address}\n                    value={token.address}\n                    label={token.symbol + ' ' + token.name}\n                    data-label={\n                      token.symbol +\n                      (balances && showBalance && token.amountRendered\n                        ? ' (' + token.amountRendered + ')'\n                        : '')\n                    }>\n                    <div className=\"option-item\">\n                      <span role=\"img\" aria-label={token.symbol}>\n                        <Avatar\n                          size=\"small\"\n                          src={token.logoURI}\n                          alt={token.symbol}\n                          style={{ marginRight: 10 }}>\n                          {token.symbol[0]}\n                        </Avatar>\n                      </span>\n                      <span className=\"option-name\">\n                        {token.symbol} - {token.name}\n                      </span>\n                      <span className=\"option-balance\">{token.amountRendered}</span>\n                    </div>\n                  </Select.Option>\n                ))}\n          </Select.OptGroup>\n        )}\n\n        {/* All Token */}\n        {selectedChain ? (\n          <Select.OptGroup label=\"All Token\">\n            {tokens[selectedChain]?.map((token) => (\n              <Select.Option\n                key={token.address}\n                value={token.address}\n                label={token.symbol + ' - ' + token.name}\n                data-label={\n                  token.symbol +\n                  (balances && showBalance && token.amountRendered\n                    ? ' (' + token.amountRendered + ')'\n                    : '')\n                }>\n                <div className={'option-item ' + (grayed && token.amount?.eq(0) ? 'disabled' : '')}>\n                  <span role=\"img\" aria-label={token.symbol}>\n                    <Avatar\n                      size=\"small\"\n                      src={token.logoURI}\n                      alt={token.symbol}\n                      style={{ marginRight: 10 }}>\n                      {token.symbol[0]}\n                    </Avatar>\n                  </span>\n                  <span className=\"option-name\">\n                    {token.symbol} - {token.name}\n                  </span>\n                  <span className=\"option-balance\">{token.amountRendered}</span>\n                </div>\n              </Select.Option>\n            ))}\n          </Select.OptGroup>\n        ) : (\n          <Select.OptGroup label=\"Please select a chain first\"></Select.OptGroup>\n        )}\n      </Select>\n    </>\n  )\n}\n\nexport default TokenSelect\n","import { InjectedConnector } from '@web3-react/injected-connector'\nimport { NetworkConnector } from '@web3-react/network-connector'\nimport { providers } from 'ethers'\n\nimport { ChainId, getChainById, multicallAddresses, supportedChains } from '../../types'\n\nconst customRpc: Record<number, string | undefined> = {\n  [ChainId.ETH]: process.env.REACT_APP_RPC_URL_MAINNET,\n  [ChainId.POL]: process.env.REACT_APP_RPC_URL_POLYGON,\n  [ChainId.BSC]: process.env.REACT_APP_RPC_URL_BSC,\n  [ChainId.DAI]: process.env.REACT_APP_RPC_URL_XDAI,\n  [ChainId.FTM]: process.env.REACT_APP_RPC_URL_FANTOM,\n  [ChainId.ARB]: process.env.REACT_APP_RPC_URL_ARBITRUM,\n\n  // Testnet\n  [ChainId.ROP]: process.env.REACT_APP_RPC_URL_ROPSTEN,\n  [ChainId.RIN]: process.env.REACT_APP_RPC_URL_RINKEBY,\n  [ChainId.GOR]: process.env.REACT_APP_RPC_URL_GORLI,\n  [ChainId.KOV]: process.env.REACT_APP_RPC_URL_KOVAN,\n  [ChainId.ARBT]: process.env.REACT_APP_RPC_URL_ARBITRUM_RINKEBY,\n  [ChainId.OPTT]: process.env.REACT_APP_RPC_URL_OPTIMISM_KOVAN,\n  [ChainId.MUM]: process.env.REACT_APP_RPC_URL_POLYGON_MUMBAI,\n  [ChainId.BSCT]: process.env.REACT_APP_RPC_URL_BSC_TESTNET,\n}\n\n// cached providers\nconst chainProviders: Record<number, providers.FallbackProvider> = {}\n\nexport const getRpcUrl = (chainId: number) => {\n  return customRpc[chainId] || getChainById(chainId).metamask.rpcUrls[0]\n}\n\nexport const getMulticallAddresse = (chainId: number) => {\n  return multicallAddresses[chainId]\n}\n\nexport const getMulticallAddresses = (chainIds: Array<number>) => {\n  const addresses: Record<number, string> = {}\n  chainIds.forEach((chainId) => {\n    addresses[chainId] = getMulticallAddresse(chainId)\n  })\n  return addresses\n}\n\nexport const getRpcProvider = (chainId: number) => {\n  if (!chainProviders[chainId]) {\n    chainProviders[chainId] = new providers.FallbackProvider([\n      new providers.JsonRpcProvider(getRpcUrl(chainId), chainId),\n    ])\n  }\n  return chainProviders[chainId]\n}\n\nexport const getRpcProviders = (chainIds: Array<number>) => {\n  const selectedProviders: Record<number, providers.FallbackProvider> = {}\n  chainIds.forEach((chainId) => {\n    selectedProviders[chainId] = getRpcProvider(chainId)\n  })\n  return selectedProviders\n}\n\nexport const getRpcUrls = (chainIds: Array<number>) => {\n  const selectedProviders: Record<number, string[]> = {}\n  chainIds.forEach((chainId) => {\n    selectedProviders[chainId] = [getRpcUrl(chainId)]\n  })\n  return selectedProviders\n}\n\nexport const injected = new InjectedConnector({\n  supportedChainIds: supportedChains.map((chain) => chain.id),\n})\n\n// get our standard supported chain and try to append the possibly unknown chain the user is on\nexport const getInjectedConnector = async () => {\n  const { ethereum } = window as any\n  const currentProvider = new providers.Web3Provider(ethereum)\n  const chainId = (await currentProvider.getNetwork()).chainId\n  // append the current chain to the supported chains.\n  // can push duplicate ids, when user is on supported chain but that does not seem to make any problems.\n  const chains = [...supportedChains.map((chain) => chain.id), chainId]\n  return new InjectedConnector({\n    supportedChainIds: chains,\n  })\n}\n\nexport const network = new NetworkConnector({\n  urls: Object.fromEntries(\n    supportedChains.map((chain) => chain.id).map((chainId) => [chainId, getRpcUrl(chainId)]),\n  ),\n  defaultChainId: ChainId.ETH,\n})\n","import { SwapOutlined } from '@ant-design/icons'\nimport { SubgraphSyncRecord } from '@connext/nxtp-sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport { Button, Col, Input, Row, Tooltip } from 'antd'\nimport { RefSelectProps } from 'antd/lib/select'\nimport BigNumber from 'bignumber.js'\nimport React, { useEffect, useRef, useState } from 'react'\n\nimport { Chain, ChainKey, TokenAmount, TokenWithAmounts } from '../types'\nimport ChainSelect from './ChainSelect'\nimport TokenSelect from './TokenSelect'\nimport { getInjectedConnector } from './web3/connectors'\n\ninterface SwapFormProps {\n  depositChain?: ChainKey\n  setDepositChain: Function\n  depositToken?: string\n  setDepositToken: Function\n  depositAmount: BigNumber\n  setDepositAmount: Function\n\n  withdrawChain?: ChainKey\n  setWithdrawChain: Function\n  withdrawToken?: string\n  setWithdrawToken: Function\n  withdrawAmount: BigNumber\n  setWithdrawAmount: Function\n  estimatedWithdrawAmount: string\n  estimatedMinWithdrawAmount?: string\n\n  transferChains: Array<Chain>\n  tokens: { [ChainKey: string]: Array<TokenWithAmounts> }\n  balances: { [ChainKey: string]: Array<TokenAmount> } | undefined\n  allowSameChains?: boolean\n  forceSameToken?: boolean\n  syncStatus?: Record<number, SubgraphSyncRecord>\n}\n\nconst SwapForm = ({\n  depositChain,\n  setDepositChain,\n  depositToken,\n  setDepositToken,\n  depositAmount,\n  setDepositAmount,\n\n  withdrawChain,\n  setWithdrawChain,\n  withdrawToken,\n  setWithdrawToken,\n  withdrawAmount,\n  setWithdrawAmount,\n  estimatedWithdrawAmount,\n  estimatedMinWithdrawAmount,\n\n  transferChains,\n  tokens,\n  balances,\n  allowSameChains,\n  forceSameToken,\n  syncStatus,\n}: SwapFormProps) => {\n  const depositSelectRef = useRef<RefSelectProps>()\n  const withdrawSelectRef = useRef<RefSelectProps>()\n  const [depositAmountString, setDepositAmountString] = useState<string>('')\n\n  // Wallet\n  const { activate } = useWeb3React()\n\n  const connectWallet = async () => {\n    activate(await getInjectedConnector())\n  }\n\n  const onChangeDepositChain = (chainKey: ChainKey) => {\n    if (!allowSameChains && withdrawChain === chainKey) {\n      setWithdrawChain(depositChain)\n      setWithdrawToken(depositToken)\n    }\n    setDepositChain(chainKey)\n\n    // find same deposit token\n    if (depositChain) {\n      const symbol = tokens[depositChain].find((token) => token.address === depositToken)?.symbol\n      const tokenAddress = tokens[chainKey].find((token) => token.symbol === symbol)?.address\n      setDepositToken(tokenAddress)\n    }\n  }\n\n  const onChangeWithdrawChain = (chainKey: ChainKey) => {\n    if (!allowSameChains && depositChain === chainKey) {\n      setDepositChain(withdrawChain)\n      setDepositToken(withdrawToken)\n    }\n    setWithdrawChain(chainKey)\n\n    // find same withdraw token\n    if (withdrawChain) {\n      const symbol = tokens[withdrawChain].find((token) => token.address === withdrawToken)?.symbol\n      const tokenAddress = tokens[chainKey].find((token) => token.symbol === symbol)?.address\n      setWithdrawToken(tokenAddress)\n    }\n  }\n\n  const getBalance = (chainKey: ChainKey, tokenAddress: string) => {\n    if (!balances || !balances[chainKey]) {\n      return new BigNumber(0)\n    }\n\n    const tokenBalance = balances[chainKey].find((portfolio) => portfolio.address === tokenAddress)\n\n    return tokenBalance?.amount || new BigNumber(0)\n  }\n\n  const onChangeDepositToken = (tokenAddress: string) => {\n    // unselect\n    depositSelectRef?.current?.blur()\n\n    if (!depositChain) return\n\n    // connect\n    if (tokenAddress === 'connect') {\n      connectWallet()\n      return\n    }\n\n    // set token\n    setDepositToken(tokenAddress)\n    const balance = new BigNumber(getBalance(depositChain, tokenAddress))\n    if (balance.lt(depositAmount) && balance.gt(0)) {\n      setDepositAmount(balance)\n    }\n\n    // set withdraw token?\n    if (forceSameToken && withdrawChain) {\n      const symbol = tokens[depositChain].find((token) => token.address === tokenAddress)?.symbol\n      const withdrawToken = tokens[withdrawChain].find((token) => token.symbol === symbol)?.address\n      setWithdrawToken(withdrawToken)\n    }\n  }\n\n  const onChangeWithdrawToken = (tokenId: string) => {\n    // unselect\n    withdrawSelectRef?.current?.blur()\n\n    // connect\n    if (tokenId === 'connect') {\n      connectWallet()\n      return\n    }\n\n    // set token\n    setWithdrawToken(tokenId)\n\n    // set withdraw token?\n    if (forceSameToken && depositChain && withdrawChain) {\n      const symbol = tokens[withdrawChain].find((token) => token.address === tokenId)?.symbol\n      const depositToken = tokens[depositChain].find((token) => token.symbol === symbol)?.address\n      setDepositToken(depositToken)\n    }\n  }\n\n  // sync depositAmountString if depositAmount changes\n  useEffect(() => {\n    if (!new BigNumber(depositAmountString).eq(depositAmount) && depositAmount.gte(0)) {\n      setDepositAmountString(depositAmount.toFixed())\n    }\n  }, [depositAmount, depositAmountString])\n\n  const onChangeDepositAmount = (amount: string) => {\n    setDepositAmountString(amount)\n    setDepositAmount(new BigNumber(amount))\n    setWithdrawAmount(new BigNumber(Infinity))\n  }\n  const onChangeWithdrawAmount = (amount: BigNumber) => {\n    setDepositAmount(new BigNumber(Infinity))\n    setWithdrawAmount(amount)\n  }\n  const formatAmountInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    return new BigNumber(e.currentTarget.value)\n  }\n\n  const setMaxDeposit = () => {\n    if (depositToken && depositChain) {\n      const selectedToken = tokens[depositChain].find((token) => token.address === depositToken)\n      if (selectedToken && selectedToken.amount) {\n        setDepositAmount(selectedToken.amount)\n      }\n    }\n  }\n\n  const changeDirection = () => {\n    setWithdrawChain(depositChain)\n    setDepositChain(withdrawChain)\n    setWithdrawToken(depositToken)\n    setDepositToken(withdrawToken)\n  }\n\n  const hasSufficientBalance = () => {\n    if (!depositToken || !depositChain) {\n      return true\n    }\n    return depositAmount.lte(getBalance(depositChain, depositToken))\n  }\n\n  return (\n    <>\n      <Row\n        gutter={[\n          { xs: 8, sm: 16 },\n          { xs: 8, sm: 16 },\n        ]}>\n        <Col span={10}>\n          <div className=\"form-text\">From:</div>\n        </Col>\n        <Col span={14}>\n          <div className=\"form-input-wrapper\">\n            <ChainSelect\n              transferChains={transferChains}\n              selectedChain={depositChain}\n              onChangeSelectedChain={onChangeDepositChain}\n              syncStatus={syncStatus}\n            />\n          </div>\n        </Col>\n\n        <Col span={10}>\n          <div className=\"form-input-wrapper\">\n            <Input\n              type=\"number\"\n              defaultValue={0.0}\n              min={0}\n              step={0.000000000000000001}\n              value={depositAmountString}\n              onChange={(event) => onChangeDepositAmount(event.currentTarget.value)}\n              placeholder=\"0.0\"\n              bordered={false}\n              className={!hasSufficientBalance() ? 'insufficient' : ''}\n            />\n            <Button\n              className=\"maxButton\"\n              type=\"text\"\n              disabled={!depositToken}\n              onClick={() => setMaxDeposit()}>\n              MAX\n            </Button>\n          </div>\n        </Col>\n        <Col span={14}>\n          <div className=\"form-input-wrapper\">\n            <TokenSelect\n              tokens={tokens}\n              balances={balances}\n              selectedChain={depositChain}\n              selectedToken={depositToken}\n              onChangeSelectedToken={onChangeDepositToken}\n              selectReference={depositSelectRef}\n              grayed={true}\n            />\n          </div>\n        </Col>\n      </Row>\n\n      <Row style={{ margin: 32 }} justify={'center'}>\n        <SwapOutlined onClick={() => changeDirection()} />\n      </Row>\n\n      <Row\n        gutter={[\n          { xs: 8, sm: 16 },\n          { xs: 8, sm: 16 },\n        ]}>\n        <Col span={10}>\n          <div className=\"form-text\">To:</div>\n        </Col>\n        <Col span={14}>\n          <div className=\"form-input-wrapper\">\n            <ChainSelect\n              transferChains={transferChains}\n              selectedChain={withdrawChain}\n              onChangeSelectedChain={onChangeWithdrawChain}\n              syncStatus={syncStatus}\n            />\n          </div>\n        </Col>\n\n        <Col span={10}>\n          <div className=\"form-input-wrapper disabled\">\n            <Input\n              type=\"text\"\n              defaultValue={0.0}\n              min={0}\n              value={estimatedWithdrawAmount}\n              // value={isFinite(withdrawAmount) ? withdrawAmount : ''}\n              onChange={(event) => onChangeWithdrawAmount(formatAmountInput(event))}\n              placeholder=\"...\"\n              bordered={false}\n              disabled\n            />\n            {!!estimatedMinWithdrawAmount && (\n              <Tooltip\n                color={'gray'}\n                title={`The final amount might change due to slippage but will not fall below ${estimatedMinWithdrawAmount}`}>\n                <span className=\"amountBadge\">?</span>\n              </Tooltip>\n            )}\n          </div>\n        </Col>\n        <Col span={14}>\n          <div className=\"form-input-wrapper\">\n            <TokenSelect\n              tokens={tokens}\n              balances={balances}\n              selectedChain={withdrawChain}\n              selectedToken={withdrawToken}\n              onChangeSelectedToken={onChangeWithdrawToken}\n              selectReference={withdrawSelectRef}\n              grayed={false}\n            />\n          </div>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default SwapForm\n","export default \"data:image/png;base64,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\"","import { Badge, Tooltip } from 'antd'\n\nimport { Process, Step } from '../types'\n\nconst DEFAULT_TRANSACTIONS_TO_LOG = 10\n\nexport function renderProcessMessage(process: Process) {\n  if (process.txLink) {\n    if (process.message === 'Sign Message to Claim Funds') {\n      return <>{process.message.toString()}</>\n    }\n    if (process.confirmations) {\n      return (\n        <>\n          {process.message}{' '}\n          <a href={process.txLink} target=\"_blank\" rel=\"nofollow noreferrer\">\n            Tx {renderConfirmations(process.confirmations, DEFAULT_TRANSACTIONS_TO_LOG)}\n          </a>\n        </>\n      )\n    }\n    return (\n      <>\n        {process.message}{' '}\n        <a href={process.txLink} target=\"_blank\" rel=\"nofollow noreferrer\">\n          Tx\n        </a>\n      </>\n    )\n  }\n  return <>{process.message.toString()}</>\n}\n\nexport const renderProcessError = (step: Step, process: Process) => {\n  const errorMessage = process.errorMessage && (\n    <>\n      Error: {process.errorMessage.substring(0, 350)}\n      {process.errorMessage.length > 350 ? '...' : ''}\n    </>\n  )\n\n  const htmlMessage = process.htmlErrorMessage && (\n    <div dangerouslySetInnerHTML={{ __html: process.htmlErrorMessage }} />\n  )\n\n  return (\n    <>\n      {errorMessage ? <div style={{ marginBottom: '5px' }}>{errorMessage}</div> : ''}\n      {htmlMessage}\n    </>\n  )\n}\n\nconst renderConfirmations = (count: number, max: number) => {\n  const text = count < max ? `${count}/${max}` : `${max}+`\n  return (\n    <Tooltip title={text + ' Confirmations'}>\n      <Badge count={text} style={{ backgroundColor: '#52c41a', marginBottom: '2px' }} />\n    </Tooltip>\n  )\n}\n","import React, { useEffect, useRef, useState } from 'react'\n\nimport { parseSecondsAsTime } from '../services/utils'\n\ninterface ClockProps {\n  startedAt: number\n  successAt?: number | undefined\n  failedAt?: number | undefined\n}\n\nconst Clock = ({ startedAt, successAt, failedAt }: ClockProps) => {\n  const [count, setCount] = useState<number>(Math.floor((Date.now() - startedAt) / 1000))\n  const intervalRef = useRef<NodeJS.Timeout>()\n\n  const getCount = () => {\n    // not ended\n    if (!failedAt && !successAt) {\n      return count\n    }\n\n    // ended\n    return Math.floor(((failedAt || successAt || 0) - startedAt) / 1000)\n  }\n\n  const renderTime = () => {\n    const total = getCount()\n    return parseSecondsAsTime(total)\n  }\n\n  useEffect(() => {\n    intervalRef.current = setInterval(() => setCount((count) => count + 1), 1000)\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current)\n      }\n    }\n  }, [])\n\n  return <>{renderTime()}</>\n}\n\nexport default Clock\n","import { ArrowRightOutlined, LoadingOutlined, PauseCircleOutlined } from '@ant-design/icons'\nimport { Web3Provider } from '@ethersproject/providers'\nimport LiFi, { ExecutionSettings, StepTool } from '@lifinance/sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport { Avatar, Button, Divider, Row, Space, Spin, Timeline, Tooltip, Typography } from 'antd'\nimport BigNumber from 'bignumber.js'\nimport { constants } from 'ethers'\nimport { useEffect, useState } from 'react'\nimport { useMediaQuery } from 'react-responsive'\nimport { Link } from 'react-router-dom'\n\nimport walletIcon from '../assets/wallet.png'\nimport { storeRoute } from '../services/localStorage'\nimport { switchChain, switchChainAndAddToken } from '../services/metamask'\nimport Notification, { NotificationType } from '../services/notifications'\nimport { renderProcessError, renderProcessMessage } from '../services/processRenderer'\nimport { formatTokenAmount, parseSecondsAsTime } from '../services/utils'\nimport {\n  ChainKey,\n  findTool,\n  getChainById,\n  getChainByKey,\n  isCrossStep,\n  isLifiStep,\n  Route,\n  Step,\n  TokenAmount,\n} from '../types'\nimport Clock from './Clock'\nimport LoadingIndicator from './LoadingIndicator'\n\ninterface SwappingProps {\n  route: Route\n  updateRoute: Function\n  onSwapDone: Function\n}\n\nconst getFinalBalance = (account: string, route: Route): Promise<TokenAmount | null> => {\n  const lastStep = route.steps[route.steps.length - 1]\n  const { toToken } = getReceivingInfo(lastStep)\n  return LiFi.getTokenBalance(account, toToken)\n}\n\nconst getReceivingInfo = (step: Step) => {\n  const toChain = getChainById(step.action.toChainId)\n  const toToken = step.action.toToken\n  return { toChain, toToken }\n}\n\nconst Swapping = ({ route, updateRoute, onSwapDone }: SwappingProps) => {\n  const { steps } = route\n\n  const isMobile = useMediaQuery({ query: `(max-width: 760px)` })\n\n  const [swapStartedAt, setSwapStartedAt] = useState<number>()\n  const [swapDoneAt, setSwapDoneAt] = useState<number>()\n  const [isSwapping, setIsSwapping] = useState<boolean>(false)\n  const [alerts] = useState<Array<JSX.Element>>([])\n  const [finalTokenAmount, setFinalTokenAmount] = useState<TokenAmount | null>()\n\n  // Wallet\n  const web3 = useWeb3React<Web3Provider>()\n\n  useEffect(() => {\n    // check if route is eligible for automatic resuming\n    const allDone = steps.every((step) => step.execution?.status === 'DONE')\n    const isFailed = steps.some((step) => step.execution?.status === 'FAILED')\n    const alreadyStarted = steps.some((step) => step.execution)\n    if (!allDone && !isFailed && alreadyStarted) {\n      resumeExecution()\n    }\n\n    // move execution to background when modal is closed\n    return function cleanup() {\n      LiFi.moveExecutionToBackground(route)\n    }\n  }, [])\n\n  const parseExecution = (step: Step) => {\n    if (!step.execution) {\n      return []\n    }\n    return step.execution.process.map((process, index, processList) => {\n      const type =\n        process.status === 'DONE' ? 'success' : process.status === 'FAILED' ? 'danger' : undefined\n      const hasFailed = process.status === 'FAILED'\n      const isLastPendingProcess = index === processList.length - 1 && process.status === 'PENDING'\n      return (\n        <span key={index} style={{ display: 'flex' }}>\n          <Typography.Text\n            type={type}\n            style={{ maxWidth: 250 }}\n            className={isSwapping && isLastPendingProcess ? 'flashing' : undefined}>\n            <p>{renderProcessMessage(process)}</p>\n\n            {hasFailed && (\n              <Typography.Text type=\"secondary\" style={{ whiteSpace: 'pre-wrap' }}>\n                {renderProcessError(step, process)}\n              </Typography.Text>\n            )}\n          </Typography.Text>\n          <Typography.Text style={{ marginLeft: 'auto', minWidth: 35 }}>\n            <Clock\n              startedAt={process.startedAt}\n              successAt={process.doneAt}\n              failedAt={process.failedAt}\n            />\n          </Typography.Text>\n        </span>\n      )\n    })\n  }\n\n  const getChainAvatar = (chainKey: ChainKey) => {\n    const chain = getChainByKey(chainKey)\n    return (\n      <Tooltip title={chain.name}>\n        <Avatar size=\"small\" src={chain.logoURI} alt={chain.name}></Avatar>\n      </Tooltip>\n    )\n  }\n\n  const getAvatar = (toolKey: StepTool) => {\n    const tool = findTool(toolKey)\n    return (\n      <Tooltip title={tool?.name}>\n        <Avatar size=\"small\" src={tool?.logoURI} alt={tool?.name}></Avatar>\n      </Tooltip>\n    )\n  }\n\n  const parseStepToTimeline = (step: Step, index: number) => {\n    const executionSteps = parseExecution(step)\n    const isDone = step.execution && step.execution.status === 'DONE'\n    const isLoading = isSwapping && step.execution && step.execution.status === 'PENDING'\n    const isPaused = !isSwapping && step.execution && step.execution.status === 'PENDING'\n    const color = isDone ? 'green' : step.execution ? 'blue' : 'gray'\n    const executionDuration = !!step.estimate.executionDuration && (\n      <>\n        <br />\n        <span>Estimated duration: {parseSecondsAsTime(step.estimate.executionDuration)} min</span>\n      </>\n    )\n\n    switch (step.type) {\n      case 'swap': {\n        return [\n          <Timeline.Item\n            position={isMobile ? 'right' : 'right'}\n            key={index + '_left'}\n            color={color}>\n            <h4>\n              Swap on {step.tool} {getAvatar(step.tool)}\n            </h4>\n            <span>\n              {formatTokenAmount(step.action.fromToken, step.estimate?.fromAmount)}{' '}\n              <ArrowRightOutlined />{' '}\n              {formatTokenAmount(step.action.toToken, step.estimate?.toAmount)}\n            </span>\n            {executionDuration}\n          </Timeline.Item>,\n          <Timeline.Item\n            position={isMobile ? 'right' : 'left'}\n            key={index + '_right'}\n            color={color}\n            dot={isLoading ? <LoadingOutlined /> : isPaused ? <PauseCircleOutlined /> : null}>\n            {executionSteps}\n          </Timeline.Item>,\n        ]\n      }\n\n      case 'cross': {\n        const { action, estimate } = step\n        return [\n          <Timeline.Item\n            position={isMobile ? 'right' : 'right'}\n            key={index + '_left'}\n            color={color}>\n            <h4>\n              Transfer from {getChainAvatar(getChainById(action.fromChainId).key)} to{' '}\n              {getChainAvatar(getChainById(action.toChainId).key)} via {getAvatar(step.tool)}\n            </h4>\n            <span>\n              {formatTokenAmount(action.fromToken, estimate.fromAmount)} <ArrowRightOutlined />{' '}\n              {formatTokenAmount(action.toToken, estimate.toAmount)}\n            </span>\n            {executionDuration}\n          </Timeline.Item>,\n          <Timeline.Item\n            position={isMobile ? 'right' : 'left'}\n            style={{ paddingBottom: isMobile ? 30 : 0 }}\n            key={index + '_right'}\n            color={color}\n            dot={isLoading ? <LoadingOutlined /> : isPaused ? <PauseCircleOutlined /> : null}>\n            {executionSteps}\n          </Timeline.Item>,\n        ]\n      }\n\n      case 'lifi': {\n        return [\n          <Timeline.Item\n            position={isMobile ? 'right' : 'right'}\n            key={index + '_left'}\n            color={color}>\n            <h4>\n              LiFi Contract from {getChainAvatar(getChainById(step.action.fromChainId).key)} to{' '}\n              {getChainAvatar(getChainById(step.action.toChainId).key)} via {step.tool}{' '}\n              {getAvatar(step.tool)}\n            </h4>\n            <span>\n              {formatTokenAmount(step.action.fromToken, step.estimate?.fromAmount)}{' '}\n              <ArrowRightOutlined />{' '}\n              {formatTokenAmount(step.action.toToken, step.estimate?.toAmount)}\n            </span>\n            {executionDuration}\n          </Timeline.Item>,\n          <Timeline.Item\n            position={isMobile ? 'right' : 'left'}\n            key={index + '_right'}\n            color={color}\n            dot={isLoading ? <LoadingOutlined /> : null}>\n            {executionSteps}\n          </Timeline.Item>,\n        ]\n      }\n\n      default:\n        // eslint-disable-next-line no-console\n        console.warn('should never reach here')\n    }\n  }\n\n  const startCrossChainSwap = async () => {\n    if (!web3.account || !web3.library) return\n\n    const signer = web3.library.getSigner()\n\n    const settings: ExecutionSettings = {\n      updateCallback: updateCallback,\n      switchChainHook: switchChainHook,\n    }\n    storeRoute(route)\n    setIsSwapping(true)\n    setSwapStartedAt(Date.now())\n    try {\n      await LiFi.executeRoute(signer, route, settings)\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn('Execution failed!', route)\n      // eslint-disable-next-line no-console\n      console.error(e)\n      Notification.showNotification(NotificationType.TRANSACTION_ERROR)\n      setIsSwapping(false)\n      return\n    }\n    setFinalTokenAmount(await getFinalBalance(web3.account!, route))\n    setIsSwapping(false)\n    setSwapDoneAt(Date.now())\n    Notification.showNotification(NotificationType.TRANSACTION_SUCCESSFULL)\n    onSwapDone()\n  }\n\n  const resumeExecution = async () => {\n    if (!web3.account || !web3.library) return\n\n    const settings: ExecutionSettings = {\n      updateCallback,\n      switchChainHook,\n    }\n\n    setIsSwapping(true)\n    try {\n      await LiFi.resumeRoute(web3.library.getSigner(), route, settings)\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn('Execution failed!', route)\n      // eslint-disable-next-line no-console\n      console.error(e)\n      Notification.showNotification(NotificationType.TRANSACTION_ERROR)\n      setIsSwapping(false)\n      return\n    }\n    setFinalTokenAmount(await getFinalBalance(web3.account!, route))\n    setIsSwapping(false)\n    setSwapDoneAt(Date.now())\n    Notification.showNotification(NotificationType.TRANSACTION_SUCCESSFULL)\n    onSwapDone()\n  }\n\n  const restartCrossChainSwap = async () => {\n    // remove failed\n    for (let index = 0; index < steps.length; index++) {\n      if (steps[index].execution && steps[index].execution!.status === 'FAILED') {\n        steps[index].execution!.status = 'RESUME'\n        steps[index].execution!.process.pop() // remove last (failed) process\n        updateRoute(route)\n      }\n    }\n    // start again\n    resumeExecution()\n  }\n\n  const switchChainHook = async (requiredChainId: number) => {\n    if (!web3.account || !web3.library) return\n    if ((await web3.library.getSigner().getChainId()) !== requiredChainId) {\n      const switched = await switchChain(requiredChainId)\n      if (!switched) {\n        throw new Error('Chain was not switched')\n      }\n    }\n    return web3.library.getSigner()\n  }\n\n  // called on every execution status change\n  const updateCallback = (updatedRoute: Route) => {\n    storeRoute(updatedRoute)\n    updateRoute(updatedRoute)\n  }\n\n  const getMainButton = () => {\n    // PENDING\n    if (isSwapping) {\n      return <></>\n    }\n    const isCrossChainSwap = !!steps.find((step) => isCrossStep(step) || isLifiStep(step))\n\n    // DONE\n    const isDone = steps.filter((step) => step.execution?.status !== 'DONE').length === 0\n    if (isDone) {\n      const lastStep = steps[steps.length - 1]\n      const { toChain } = getReceivingInfo(lastStep)\n      const receivedAmount = new BigNumber(lastStep.execution?.toAmount || '0')\n      const successMessage = !!finalTokenAmount ? (\n        <>\n          {!receivedAmount.isZero() && (\n            <>\n              <Typography.Text>\n                {'You received '}\n                {new BigNumber(receivedAmount).shiftedBy(-finalTokenAmount.decimals).toFixed(4)}\n                {` ${finalTokenAmount.symbol}`}\n              </Typography.Text>\n              <br />\n            </>\n          )}\n          <Typography.Text\n            type={!receivedAmount.isZero() ? 'secondary' : undefined}\n            style={{ fontSize: !receivedAmount.isZero() ? 10 : 12 }}>\n            {'You now have '}\n            <span className=\"vi-hightlight\">\n              {new BigNumber(finalTokenAmount.amount).toFixed(4)}\n              {` ${finalTokenAmount.symbol}`}\n            </span>\n            {` on ${toChain.name}`}\n          </Typography.Text>\n        </>\n      ) : (\n        ''\n      )\n\n      return (\n        <Space direction=\"vertical\">\n          <Typography.Text strong>Swap Successful!</Typography.Text>\n          {finalTokenAmount &&\n            (finalTokenAmount.address === constants.AddressZero ? (\n              <span>{successMessage}</span>\n            ) : (\n              <Tooltip title=\"Click to add this token to your wallet.\">\n                <span\n                  style={{ cursor: 'copy' }}\n                  onClick={() => switchChainAndAddToken(toChain.id, finalTokenAmount)}>\n                  {successMessage}\n                </span>\n              </Tooltip>\n            ))}\n          {/* <Link to=\"/dashboard\">\n            <Button type=\"link\">Dashboard</Button>\n          </Link> */}\n        </Space>\n      )\n    }\n\n    // FAILED\n    const isFailed = steps.some((step) => step.execution?.status === 'FAILED')\n    if (isFailed) {\n      return (\n        <Button type=\"primary\" onClick={() => restartCrossChainSwap()}>\n          Restart from Failed Step\n        </Button>\n      )\n    }\n\n    const chainSwitchRequired = steps.some(\n      (step) => step.execution?.status === 'CHAIN_SWITCH_REQUIRED',\n    )\n    if (chainSwitchRequired) {\n      return <></>\n    }\n\n    // NOT_STARTED\n    return (\n      <Button type=\"primary\" onClick={() => startCrossChainSwap()}>\n        {isCrossChainSwap ? 'Start Cross Chain Swap' : 'Start Swap'}\n      </Button>\n    )\n  }\n\n  const getCurrentProcess = () => {\n    for (const step of steps) {\n      if (step.execution?.process) {\n        for (const process of step.execution?.process) {\n          if (process.status === 'ACTION_REQUIRED' || process.status === 'PENDING') {\n            return process\n          }\n        }\n      }\n    }\n    return null\n  }\n\n  const currentProcess = getCurrentProcess()\n\n  return (\n    <>\n      {alerts}\n      <br />\n\n      <Timeline mode={isMobile ? 'left' : 'alternate'} className=\"swapping-modal-timeline\">\n        {/* Steps */}\n        {steps.map(parseStepToTimeline)}\n      </Timeline>\n\n      <div style={{ display: 'flex', backgroundColor: 'rgba(255,255,255, 0)' }}>\n        <Typography.Text style={{ marginLeft: 'auto', marginRight: 5 }}>\n          {swapStartedAt ? (\n            <span className=\"totalTime\">\n              <Clock startedAt={swapStartedAt} successAt={swapDoneAt} />\n            </span>\n          ) : (\n            <span>&nbsp;</span>\n          )}\n        </Typography.Text>\n      </div>\n\n      <hr />\n\n      <div className=\"swapp-modal-footer\">\n        <div style={{ textAlign: 'center', transform: 'scale(1.3)' }}>{getMainButton()}</div>\n\n        {isSwapping && currentProcess && currentProcess.status === 'ACTION_REQUIRED' && (\n          <>\n            <Row justify=\"center\" style={{ marginBottom: 6 }}>\n              <Typography.Text>{renderProcessMessage(currentProcess)}</Typography.Text>\n            </Row>\n            <Row justify=\"center\">\n              <img src={walletIcon} alt=\"Please Check Your Wallet\" />\n            </Row>\n          </>\n        )}\n\n        {isSwapping && currentProcess && currentProcess.status === 'PENDING' && (\n          <>\n            <Row justify=\"center\">\n              <Typography.Text className=\"flashing\">\n                {renderProcessMessage(currentProcess)}\n              </Typography.Text>\n            </Row>\n            <Row style={{ marginTop: 20 }} justify=\"center\">\n              <Spin indicator={<LoadingIndicator />} />\n            </Row>\n          </>\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default Swapping\n","export default \"data:image/png;base64,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\"","import { DeleteOutlined, LoadingOutlined, LoginOutlined } from '@ant-design/icons'\nimport { Web3Provider } from '@ethersproject/providers'\nimport { useWeb3React } from '@web3-react/core'\nimport { Button, Popconfirm, Table } from 'antd'\n\nimport { formatTokenAmount, isWalletDeactivated } from '../services/utils'\nimport { findTool, getChainById, Route } from '../types'\nimport { getInjectedConnector } from './web3/connectors'\n\ninterface ActiveTrasactionsTableProps {\n  routes: Array<Route>\n  selectRoute: Function\n  deleteRoute: Function\n  historical?: boolean\n}\n\nfunction getStateText(route: Route) {\n  if (route.steps.some((step) => step.execution?.status === 'FAILED')) {\n    return 'Failed'\n  } else if (route.steps.every((step) => step.execution?.status === 'DONE')) {\n    return 'Done'\n  } else if (route.steps.some((step) => step.execution?.status === 'CANCELLED')) {\n    return 'Cancelled'\n  } else if (route.steps.some((step) => step.execution?.status === 'CHAIN_SWITCH_REQUIRED')) {\n    return 'Chain Switch Required'\n  } else if (\n    route.steps.some((step) =>\n      step.execution?.process.some((process) => process.status === 'ACTION_REQUIRED'),\n    )\n  ) {\n    return 'Action Required'\n  } else {\n    return 'Pending'\n  }\n}\n\nfunction TrasactionsTable({\n  routes,\n  selectRoute,\n  deleteRoute,\n  historical,\n}: ActiveTrasactionsTableProps) {\n  const web3 = useWeb3React<Web3Provider>()\n  const { active, activate } = useWeb3React()\n  const login = async () => activate(await getInjectedConnector())\n\n  const renderActionButton = (route: Route) => {\n    if (historical) {\n      return (\n        <Button danger type=\"ghost\" shape=\"round\" onClick={() => deleteRoute(route)}>\n          <DeleteOutlined />\n        </Button>\n      )\n    }\n    if (!web3.account) {\n      if (!active && isWalletDeactivated(web3.account)) {\n        return (\n          <Button disabled={true} type=\"ghost\" shape=\"round\" icon={<LoadingOutlined />}>\n            Connect Wallet\n          </Button>\n        )\n      }\n\n      return (\n        <Button type=\"ghost\" shape=\"round\" icon={<LoginOutlined />} onClick={() => login()}>\n          Connect Wallet\n        </Button>\n      )\n    }\n    return (\n      <span style={{ whiteSpace: 'nowrap' }}>\n        <Button\n          style={{ marginRight: 10, padding: '3px 16px 4px 16px' }}\n          type=\"primary\"\n          shape=\"round\"\n          onClick={() => selectRoute(route)}>\n          Resume Swap\n        </Button>\n        <Popconfirm\n          title={<>Are you sure to delete this transfer?</>}\n          onConfirm={() => deleteRoute(route)}\n          okText=\"Yes\"\n          okType=\"danger\"\n          cancelText=\"No\">\n          <Button style={{ padding: '3px 16px 4px 16px' }} danger type=\"ghost\" shape=\"round\">\n            <DeleteOutlined />\n          </Button>\n        </Popconfirm>\n      </span>\n    )\n  }\n\n  const columns = [\n    {\n      title: 'Started',\n      dataIndex: 'date',\n    },\n    {\n      title: 'From Chain',\n      dataIndex: 'fromChain',\n    },\n    {\n      title: 'From Token',\n      dataIndex: 'fromToken',\n    },\n    {\n      title: 'To Chain',\n      dataIndex: 'toChain',\n    },\n    {\n      title: 'To Token',\n      dataIndex: 'toToken',\n    },\n    {\n      title: 'Protocols',\n      dataIndex: 'protocols',\n    },\n    {\n      title: 'State',\n      dataIndex: 'state',\n    },\n    {\n      title: 'Action',\n      dataIndex: 'action',\n    },\n  ]\n\n  const data = routes.map((route, index) => {\n    const firstStep = route.steps[0]\n    const startedDate =\n      firstStep.execution?.process?.[0]?.startedAt &&\n      new Date(firstStep.execution.process[0].startedAt).toLocaleString()\n    const lastStep = route.steps[route.steps.length - 1]\n    let toChainId = lastStep.action.toChainId\n\n    return {\n      key: index,\n      date: startedDate,\n      fromChain: getChainById(firstStep.action.fromChainId).name,\n      toChain: getChainById(toChainId).name,\n      fromToken: `${formatTokenAmount(firstStep.action.fromToken, firstStep.estimate.fromAmount)}`,\n      toToken: `${formatTokenAmount(lastStep.action.toToken, lastStep.estimate.toAmount)}`,\n      protocols: route.steps.map((step) => findTool(step.tool)?.name).join(' > '),\n      state: getStateText(route),\n      action: renderActionButton(route),\n    }\n  })\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={data}\n      pagination={{ hideOnSinglePage: true, size: 'small', position: ['bottomCenter'] }}\n      className=\"tx-table\"\n    />\n  )\n}\n\nexport default TrasactionsTable\n","import './Swap.css'\n\nimport { LoadingOutlined, LoginOutlined, SwapOutlined, SyncOutlined } from '@ant-design/icons'\nimport { Web3Provider } from '@ethersproject/providers'\nimport LiFi, { supportedChains } from '@lifinance/sdk'\nimport { useWeb3React } from '@web3-react/core'\nimport {\n  Button,\n  Checkbox,\n  Col,\n  Collapse,\n  Form,\n  InputNumber,\n  Modal,\n  Row,\n  Select,\n  Tooltip,\n  Typography,\n} from 'antd'\nimport { Content } from 'antd/lib/layout/layout'\nimport Title from 'antd/lib/typography/Title'\nimport BigNumber from 'bignumber.js'\nimport { ethers } from 'ethers'\nimport { createBrowserHistory } from 'history'\nimport { animate, stagger } from 'motion'\nimport QueryString from 'qs'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport { getRpcs } from '../config/connectors'\nimport {\n  deleteRoute,\n  readActiveRoutes,\n  readHistoricalRoutes,\n  storeRoute,\n} from '../services/localStorage'\nimport { switchChain } from '../services/metamask'\nimport { loadTokenListAsTokens } from '../services/tokenListService'\nimport {\n  deepClone,\n  formatTokenAmount,\n  formatTokenAmountOnly,\n  isWalletDeactivated,\n} from '../services/utils'\nimport {\n  Chain,\n  ChainId,\n  ChainKey,\n  CoinKey,\n  defaultTokens,\n  findDefaultToken,\n  getChainById,\n  getChainByKey,\n  isSwapStep,\n  Route as RouteType,\n  RoutesRequest,\n  RoutesResponse,\n  Token,\n  TokenAmount,\n} from '../types'\nimport LoadingIndicator from './LoadingIndicator'\nimport Route from './Route'\nimport SwapForm from './SwapForm'\nimport Swapping from './Swapping'\nimport TrasactionsTable from './TransactionsTable'\nimport { getInjectedConnector } from './web3/connectors'\n\nconst history = createBrowserHistory()\nconst { Panel } = Collapse\n\nlet currentRouteCallId: string\n\ninterface TokenWithAmounts extends Token {\n  amount?: BigNumber\n  amountRendered?: string\n}\n\nconst fadeInAnimation = (element: React.MutableRefObject<HTMLDivElement | null>) => {\n  setTimeout(() => {\n    const nodes = element.current?.childNodes\n    if (nodes) {\n      animate(\n        nodes as NodeListOf<Element>,\n        {\n          y: ['50px', '0px'],\n          opacity: [0, 1],\n        },\n        {\n          delay: stagger(0.2),\n          duration: 0.5,\n          easing: 'ease-in-out',\n        },\n      )\n    }\n  }, 0)\n}\n\nconst filterDefaultTokenByChains = (tokens: TokenAmountList, transferChains: Chain[]) => {\n  const result: TokenAmountList = {}\n\n  transferChains.forEach((chain) => {\n    if (tokens[chain.key]) {\n      result[chain.key] = tokens[chain.key]\n    }\n  })\n  return result\n}\n\nconst parseChain = (passed: string) => {\n  // is ChainKey?\n  const chainKeys = Object.values(ChainKey) as string[]\n  if (chainKeys.includes(passed.toLowerCase())) {\n    return ChainId[passed.toUpperCase() as keyof typeof ChainId]\n  }\n\n  // is ChainId?\n  const id = parseInt(passed)\n  if (!isNaN(id)) {\n    return id\n  }\n}\n\nconst parseToken = (\n  passed: string,\n  chainKey: ChainKey,\n  transferTokens: { [ChainKey: string]: Array<Token> },\n) => {\n  // is CoinKey?\n  const coinKeys = Object.values(CoinKey)\n  const coinKey = passed.toUpperCase() as CoinKey\n  if (coinKeys.includes(coinKey)) {\n    return findDefaultToken(coinKey, getChainByKey(chainKey).id)\n  }\n\n  // is token address valid?\n  const fromTokenId = ethers.utils.getAddress(passed.trim()).toLowerCase()\n  // does token address exist in our default tokens? (tokenlists not loaded yet)\n  return transferTokens[chainKey]?.find((token) => token.address === fromTokenId)\n}\n\nconst getDefaultParams = (\n  search: string,\n  transferChains: Chain[],\n  transferTokens: { [ChainKey: string]: Array<Token> },\n) => {\n  const defaultParams: StartParams = {\n    depositChain: undefined,\n    depositToken: undefined,\n    depositAmount: new BigNumber(-1),\n    withdrawChain: undefined,\n    withdrawToken: undefined,\n  }\n\n  const params = QueryString.parse(search, { ignoreQueryPrefix: true })\n\n  // fromChain\n  let newFromChain\n  if (params.fromChain && typeof params.fromChain === 'string') {\n    try {\n      const newFromChainId = parseChain(params.fromChain)\n      newFromChain = transferChains.find((chain) => chain.id === newFromChainId)\n\n      if (newFromChain) {\n        defaultParams.depositChain = newFromChain.key\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e)\n    }\n  }\n\n  // fromToken\n  if (params.fromToken && typeof params.fromToken === 'string' && defaultParams.depositChain) {\n    try {\n      const foundToken = parseToken(params.fromToken, defaultParams.depositChain, transferTokens)\n      const inDefault = transferTokens[defaultParams.depositChain].find(\n        (token) => token.address === foundToken?.address,\n      )\n      if (foundToken && inDefault) {\n        defaultParams.depositToken = foundToken.address\n      } else if (foundToken) {\n        transferTokens[defaultParams.depositChain].push(foundToken)\n        defaultParams.depositToken = foundToken.address\n      } else if (newFromChain) {\n        // only add unknow token if chain was specified with it\n        const fromTokenId = ethers.utils.getAddress(params.fromToken.trim()).toLowerCase()\n        transferTokens[defaultParams.depositChain].push({\n          address: fromTokenId,\n          symbol: 'Unknown',\n          decimals: 18,\n          chainId: newFromChain.id,\n          coinKey: '' as CoinKey,\n          name: 'Unknown',\n          logoURI: '',\n        })\n        defaultParams.depositToken = fromTokenId\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e)\n    }\n  }\n\n  // fromAmount\n  if (params.fromAmount && typeof params.fromAmount === 'string') {\n    try {\n      const newAmount = new BigNumber(params.fromAmount)\n      if (newAmount.gt(0)) {\n        defaultParams.depositAmount = newAmount\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e)\n    }\n  }\n\n  // toChain\n  let newToChain\n  if (params.toChain && typeof params.toChain === 'string') {\n    try {\n      const newToChainId = parseChain(params.toChain)\n      newToChain = transferChains.find((chain) => chain.id === newToChainId)\n\n      if (newToChain) {\n        defaultParams.withdrawChain = newToChain.key\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e)\n    }\n  }\n\n  // toToken\n  if (params.toToken && typeof params.toToken === 'string' && defaultParams.withdrawChain) {\n    try {\n      const foundToken = parseToken(params.toToken, defaultParams.withdrawChain, transferTokens)\n      const inDefault = transferTokens[defaultParams.withdrawChain].find(\n        (token) => token.address === foundToken?.address,\n      )\n      if (foundToken && inDefault) {\n        defaultParams.withdrawToken = foundToken.address\n      } else if (foundToken) {\n        transferTokens[defaultParams.withdrawChain].push(foundToken)\n        defaultParams.withdrawToken = foundToken.address\n      } else if (newToChain) {\n        // only add unknow token if chain was specified with it\n        const toTokenId = ethers.utils.getAddress(params.toToken.trim()).toLowerCase()\n        transferTokens[defaultParams.withdrawChain].push({\n          address: toTokenId,\n          symbol: 'Unknown',\n          decimals: 18,\n          chainId: newToChain.id,\n          coinKey: '' as CoinKey,\n          name: 'Unknown',\n          logoURI: '',\n        })\n        defaultParams.withdrawToken = toTokenId\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e)\n    }\n  }\n\n  return defaultParams\n}\n\ninterface TokenAmountList {\n  [ChainKey: string]: Array<TokenWithAmounts>\n}\n\ninterface StartParams {\n  depositChain?: ChainKey\n  depositToken?: string\n  depositAmount: BigNumber\n  withdrawChain?: ChainKey\n  withdrawToken?: string\n}\n\nlet startParams: StartParams\n\ninterface SwapProps {\n  transferChains: Chain[]\n}\n\nconst Swap = ({ transferChains }: SwapProps) => {\n  const transferTokens = filterDefaultTokenByChains(defaultTokens, transferChains)\n  startParams =\n    startParams ?? getDefaultParams(history.location.search, transferChains, transferTokens)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [unused, setStateUpdate] = useState<number>(0)\n\n  // From\n  const [fromChainKey, setFromChainKey] = useState<ChainKey | undefined>(startParams.depositChain)\n  const [depositAmount, setDepositAmount] = useState<BigNumber>(startParams.depositAmount)\n  const [fromTokenAddress, setFromTokenAddress] = useState<string | undefined>(\n    startParams.depositToken,\n  )\n  const [toChainKey, setToChainKey] = useState<ChainKey | undefined>(startParams.withdrawChain)\n  const [withdrawAmount, setWithdrawAmount] = useState<BigNumber>(new BigNumber(Infinity))\n  const [toTokenAddress, setToTokenAddress] = useState<string | undefined>(\n    startParams.withdrawToken,\n  )\n  const [tokens, setTokens] = useState<TokenAmountList>(transferTokens)\n  const [refreshTokens, setRefreshTokens] = useState<boolean>(false)\n  const [balances, setBalances] = useState<{ [ChainKey: string]: Array<TokenAmount> }>()\n  const [refreshBalances, setRefreshBalances] = useState<boolean>(true)\n  const [routeCallResult, setRouteCallResult] = useState<{ result: RoutesResponse; id: string }>()\n\n  // Options\n  const [optionSlippage, setOptionSlippage] = useState<number>(3)\n  const [optionInfiniteApproval, setOptionInfiniteApproval] = useState<boolean>(true)\n  const [optionEnabledBridges, setOptionEnabledBridges] = useState<string[] | undefined>()\n  const [availableBridges, setAvailableBridges] = useState<string[]>([])\n  const [optionEnabledExchanges, setOptionEnabledExchanges] = useState<string[] | undefined>()\n  const [availableExchanges, setAvailableExchanges] = useState<string[]>([])\n\n  // Routes\n  const [routes, setRoutes] = useState<Array<RouteType>>([])\n  const [routesLoading, setRoutesLoading] = useState<boolean>(false)\n  const [noRoutesAvailable, setNoRoutesAvailable] = useState<boolean>(false)\n  const [selectedRoute, setSelectedRoute] = useState<RouteType | undefined>()\n  const [highlightedIndex, setHighlightedIndex] = useState<number>(-1)\n  const [activeRoutes, setActiveRoutes] = useState<Array<RouteType>>(readActiveRoutes())\n  const [historicalRoutes, setHistoricalRoutes] = useState<Array<RouteType>>(readHistoricalRoutes())\n\n  // Misc\n  const [restartedOnPageLoad, setRestartedOnPageLoad] = useState<boolean>(false)\n  const [balancePollingStarted, setBalancePollingStarted] = useState<boolean>(false)\n\n  // Wallet\n  const web3 = useWeb3React<Web3Provider>()\n  const { active, activate } = useWeb3React()\n  const login = async () => activate(await getInjectedConnector())\n\n  // Elements used for animations\n  const routeCards = useRef<HTMLDivElement | null>(null)\n\n  // new\n\n  const [showRoutesable, setShowRoutesable] = useState<boolean>(false)\n\n  const showRoutes = () => {\n    if (showRoutesable === false) {\n      setShowRoutesable(true)\n    } else {\n      setShowRoutesable(false)\n    }\n  }\n\n  useEffect(() => {\n    // get new execution status on page load\n    if (!restartedOnPageLoad) {\n      setRestartedOnPageLoad(true)\n\n      activeRoutes.map((route) => {\n        if (!web3 || !web3.library) return\n        // check if it makes sense to fetch the status of a route:\n        // if failed or action required it makes no sense\n        const routeFailed = route.steps.some(\n          (step) => step.execution && step.execution.status === 'FAILED',\n        )\n        const actionRequired = route.steps.some(\n          (step) =>\n            step.execution &&\n            step.execution.process.some((process) => process.status === 'ACTION_REQUIRED'),\n        )\n\n        if (routeFailed || actionRequired) return\n        const settings = {\n          updateCallback: (updatedRoute: RouteType) => {\n            storeRoute(updatedRoute)\n            setActiveRoutes(readActiveRoutes())\n            setHistoricalRoutes(readHistoricalRoutes())\n          },\n        }\n        LiFi.resumeRoute(web3.library.getSigner(), route, settings)\n        LiFi.moveExecutionToBackground(route)\n      })\n    }\n  }, [web3.library])\n\n  useEffect(() => {\n    // executed once after page is loaded\n    if (!balancePollingStarted) {\n      setBalancePollingStarted(true)\n\n      // start balance polling\n      const pollingInterval = setInterval(() => {\n        setRefreshBalances(true)\n      }, 60_000)\n\n      return () => {\n        clearInterval(pollingInterval)\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    const load = async () => {\n      LiFi.setConfig({\n        apiUrl: process.env.REACT_APP_API_URL,\n        rpcs: getRpcs(),\n        defaultRouteOptions: {\n          integrator: 'li.finance',\n        },\n      })\n\n      const possibilities = await LiFi.getPossibilities()\n\n      // bridges\n      const bridges: string[] = possibilities.bridges\n        .map((bridge: any) => bridge.tool)\n        .map((bridgeTool: string) => bridgeTool.split('-')[0])\n      const allBridges = Array.from(new Set(bridges))\n      setAvailableBridges(allBridges)\n      setOptionEnabledBridges(allBridges)\n\n      // exchanges\n      const exchanges: string[] = possibilities.exchanges\n        .map((exchange: any) => exchange.tool)\n        .map((exchangeTool: string) => exchangeTool.split('-')[0])\n      const allExchanges = Array.from(new Set(exchanges))\n      setAvailableExchanges(allExchanges)\n      setOptionEnabledExchanges(allExchanges)\n\n      // tokens\n      const newTokens: TokenAmountList = {}\n      possibilities.tokens.forEach((token) => {\n        const chain = getChainById(token.chainId)\n        if (!newTokens[chain.key]) newTokens[chain.key] = []\n        newTokens[chain.key].push(token)\n      })\n\n      setTokens((tokens) => {\n        // which existing tokens are not included?\n        Object.keys(tokens).forEach((chainKey) => {\n          tokens[chainKey].forEach((token) => {\n            if (!newTokens[chainKey]) newTokens[chainKey] = []\n            if (!newTokens[chainKey].find((item) => item.address === token.address)) {\n              newTokens[chainKey].push(token)\n\n              // -> load token from API to get current version (e.g. if token was added via url)\n              updateTokenData(token)\n            }\n          })\n        })\n        return newTokens\n      })\n      setRefreshBalances(true)\n    }\n\n    load()\n  }, [])\n\n  const updateTokenData = (token: Token) => {\n    LiFi.getToken(token.chainId, token.address).then((updatedToken) => {\n      // sync optional properties\n      updatedToken.logoURI = updatedToken.logoURI || token.logoURI\n      updatedToken.priceUSD = updatedToken.priceUSD || token.priceUSD\n\n      // update tokens\n      setTokens((tokens) => {\n        const chain = getChainById(updatedToken.chainId)\n        if (!tokens[chain.key]) tokens[chain.key] = []\n        const index = tokens[chain.key].findIndex((token) => token.address === updatedToken.address)\n        if (index === -1) {\n          tokens[chain.key].push(updatedToken)\n        } else {\n          tokens[chain.key][index] = updatedToken\n        }\n        return tokens\n      })\n    })\n  }\n\n  const getSelectedWithdraw = () => {\n    if (highlightedIndex === -1) {\n      return {\n        estimate: '0.0',\n      }\n    } else {\n      const selectedRoute = routes[highlightedIndex]\n      const lastStep = selectedRoute.steps[selectedRoute.steps.length - 1]\n      return {\n        estimate: formatTokenAmountOnly(lastStep.action.toToken, lastStep.estimate?.toAmount),\n        min: formatTokenAmount(lastStep.action.toToken, lastStep.estimate?.toAmountMin),\n      }\n    }\n  }\n\n  // autoselect from chain based on wallet\n  useEffect(() => {\n    const walletChainIsSupported = supportedChains.some((chain) => chain.id === web3.chainId)\n    if (!walletChainIsSupported) return\n    if (web3.chainId && !fromChainKey) {\n      const chain = transferChains.find((chain) => chain.id === web3.chainId)\n      if (chain) {\n        setFromChainKey(chain.key)\n      }\n    }\n  }, [web3.chainId, fromChainKey])\n\n  // update query string\n  useEffect(() => {\n    const params = {\n      fromChain: fromChainKey,\n      fromToken: fromTokenAddress,\n      toChain: toChainKey,\n      toToken: toTokenAddress,\n      fromAmount: depositAmount.gt(0) ? depositAmount.toFixed() : undefined,\n    }\n    const search = QueryString.stringify(params)\n    history.push({\n      search,\n    })\n  }, [fromChainKey, fromTokenAddress, toChainKey, toTokenAddress, depositAmount])\n\n  useEffect(() => {\n    if (refreshTokens) {\n      setRefreshTokens(false)\n\n      transferChains.map(async (chain) => {\n        const newTokens = {\n          [chain.key]: await loadTokenListAsTokens(chain.id),\n        }\n        setTokens((tokens) => Object.assign(tokens, newTokens))\n        setStateUpdate((stateUpdate) => stateUpdate + 1)\n      })\n    }\n  }, [refreshTokens, transferChains])\n\n  const updateBalances = useCallback(async () => {\n    if (web3.account) {\n      // one call per chain to show balances as soon as the request comes back\n      Object.entries(tokens).forEach(([chainKey, tokenList]) => {\n        LiFi.getTokenBalances(web3.account!, tokenList).then((portfolio) => {\n          setBalances((balances) => {\n            if (!balances) balances = {}\n            return {\n              ...balances,\n              [chainKey]: portfolio,\n            }\n          })\n        })\n      })\n    }\n  }, [web3.account, tokens])\n\n  useEffect(() => {\n    if (refreshBalances && web3.account) {\n      setRefreshBalances(false)\n      updateBalances()\n    }\n  }, [refreshBalances, web3.account, updateBalances])\n\n  useEffect(() => {\n    if (!web3.account) {\n      setBalances(undefined) // reset old balances\n    }\n  }, [web3.account])\n\n  const getBalance = (\n    currentBalances: { [ChainKey: string]: Array<TokenAmount> } | undefined,\n    chainKey: ChainKey,\n    tokenId: string,\n  ) => {\n    if (!currentBalances || !currentBalances[chainKey]) {\n      return new BigNumber(0)\n    }\n\n    const tokenBalance = currentBalances[chainKey].find(\n      (tokenAmount) => tokenAmount.address === tokenId,\n    )\n    return tokenBalance?.amount ? new BigNumber(tokenBalance?.amount) : new BigNumber(0)\n  }\n\n  useEffect(() => {\n    // merge tokens and balances\n    for (const chain of transferChains) {\n      if (!tokens[chain.key]) {\n        continue\n      }\n      for (const token of tokens[chain.key]) {\n        if (!balances || !balances[chain.key]) {\n          // balances for chain not loaded yet\n          token.amount = new BigNumber(-1)\n          token.amountRendered = undefined\n        } else {\n          // balances loaded\n          token.amount = getBalance(balances, chain.key, token.address)\n          token.amountRendered = formatTokenAmountOnly(token, token.amount)\n        }\n      }\n    }\n\n    setTokens(tokens)\n    setStateUpdate((stateUpdate) => stateUpdate + 1)\n  }, [tokens, balances, transferChains])\n\n  const hasSufficientBalance = () => {\n    if (!fromTokenAddress || !fromChainKey) {\n      return true\n    }\n\n    return depositAmount.lte(getBalance(balances, fromChainKey, fromTokenAddress))\n  }\n\n  const hasSufficientGasBalanceOnStartChain = (route?: RouteType) => {\n    if (!route) {\n      return true\n    }\n\n    const fromChain = getChainById(route.fromChainId)\n    const balance = getBalance(balances, fromChain.key, ethers.constants.AddressZero)\n\n    const requiredAmount = route.steps\n      .filter((step) => step.action.fromChainId === route.fromChainId)\n      .map(\n        (step) =>\n          step.estimate.gasCosts &&\n          step.estimate.gasCosts.length &&\n          step.estimate.gasCosts[0].amount,\n      )\n      .map((amount) => new BigNumber(amount || '0'))\n      .reduce((a, b) => a.plus(b), new BigNumber(0))\n      .shiftedBy(-18)\n    return !balance.isZero() && balance.gte(requiredAmount)\n  }\n\n  const hasSufficientGasBalanceOnCrossChain = (route?: RouteType) => {\n    if (!route) {\n      return true\n    }\n    const lastStep = route.steps[route.steps.length - 1]\n    if (!isSwapStep(lastStep)) {\n      return true\n    }\n\n    const crossChain = getChainById(lastStep.action.fromChainId)\n    const balance = getBalance(balances, crossChain.key, ethers.constants.AddressZero)\n\n    const gasEstimate =\n      lastStep.estimate.gasCosts &&\n      lastStep.estimate.gasCosts.length &&\n      lastStep.estimate.gasCosts[0].amount\n    const requiredAmount = new BigNumber(gasEstimate || 0).shiftedBy(-18)\n    return !balance.isZero() && balance.gte(requiredAmount)\n  }\n\n  const findToken = useCallback(\n    (chainKey: ChainKey, tokenId: string) => {\n      const token = tokens[chainKey].find((token) => token.address === tokenId)\n      if (!token) {\n        throw new Error('Token not found')\n      }\n      return token\n    },\n    [tokens],\n  )\n\n  useEffect(() => {\n    const getTransferRoutes = async () => {\n      setRoutes([])\n      setHighlightedIndex(-1)\n      setNoRoutesAvailable(false)\n\n      if (depositAmount.gt(0) && fromChainKey && fromTokenAddress && toChainKey && toTokenAddress) {\n        setRoutesLoading(true)\n        const fromToken = findToken(fromChainKey, fromTokenAddress)\n        const toToken = findToken(toChainKey, toTokenAddress)\n        const request: RoutesRequest = {\n          fromChainId: fromToken.chainId,\n          fromAmount: new BigNumber(depositAmount).shiftedBy(fromToken.decimals).toFixed(0),\n          fromTokenAddress,\n          toChainId: toToken.chainId,\n          toTokenAddress,\n          fromAddress: web3.account || undefined,\n          toAddress: web3.account || undefined,\n          options: {\n            slippage: optionSlippage / 100,\n            bridges: {\n              allow: optionEnabledBridges,\n            },\n            exchanges: {\n              allow: optionEnabledExchanges,\n            },\n          },\n        }\n\n        const id = uuid()\n        try {\n          currentRouteCallId = id\n          const result = await LiFi.getRoutes(request)\n          setRouteCallResult({ result, id })\n        } catch {\n          if (id === currentRouteCallId || !currentRouteCallId) {\n            setNoRoutesAvailable(true)\n            setRoutesLoading(false)\n          }\n        }\n      }\n    }\n\n    getTransferRoutes()\n  }, [\n    depositAmount,\n    fromChainKey,\n    fromTokenAddress,\n    toChainKey,\n    toTokenAddress,\n    optionSlippage,\n    optionEnabledBridges,\n    optionEnabledExchanges,\n    findToken,\n  ])\n\n  // set route call results\n  useEffect(() => {\n    if (routeCallResult) {\n      const { result, id } = routeCallResult\n      if (id === currentRouteCallId) {\n        setRoutes(result.routes)\n        fadeInAnimation(routeCards)\n        setHighlightedIndex(result.routes.length === 0 ? -1 : 0)\n        setNoRoutesAvailable(result.routes.length === 0)\n        setRoutesLoading(false)\n      }\n    }\n  }, [routeCallResult, currentRouteCallId])\n\n  const openModal = () => {\n    // deepClone to open new modal without execution info of previous transfer using same route card\n    setSelectedRoute(deepClone(routes[highlightedIndex]))\n\n    // Reset routes to avoid reexecution with same data\n    setRoutes([])\n    setHighlightedIndex(-1)\n    setNoRoutesAvailable(false)\n  }\n\n  const submitButton = () => {\n    if (!active && isWalletDeactivated(web3.account)) {\n      return (\n        <Button\n          disabled={true}\n          shape=\"round\"\n          type=\"primary\"\n          icon={<LoadingOutlined />}\n          size={'large'}></Button>\n      )\n    }\n    if (!web3.account) {\n      return (\n        <Button\n          shape=\"round\"\n          type=\"primary\"\n          icon={<LoginOutlined />}\n          size={'large'}\n          onClick={() => login()}>\n          Connect Wallet\n        </Button>\n      )\n    }\n    if (fromChainKey && web3.chainId !== getChainByKey(fromChainKey).id) {\n      const fromChain = getChainByKey(fromChainKey)\n      return (\n        <Button\n          shape=\"round\"\n          type=\"primary\"\n          icon={<SwapOutlined />}\n          size={'large'}\n          htmlType=\"submit\"\n          onClick={() => switchChain(fromChain.id)}>\n          Switch Network to {fromChain.name}\n        </Button>\n      )\n    }\n    if (routesLoading) {\n      return (\n        <Button\n          disabled={true}\n          shape=\"round\"\n          type=\"primary\"\n          icon={<SyncOutlined spin />}\n          size={'large'}>\n          Searching Routes...\n        </Button>\n      )\n    }\n    if (noRoutesAvailable) {\n      return (\n        <Button disabled={true} shape=\"round\" type=\"primary\" size={'large'}>\n          No Route Found\n        </Button>\n      )\n    }\n    if (!hasSufficientGasBalanceOnStartChain(routes[highlightedIndex])) {\n      return (\n        <Button disabled={true} shape=\"round\" type=\"primary\" size={'large'}>\n          Insufficient Gas on Start Chain\n        </Button>\n      )\n    }\n    if (!hasSufficientGasBalanceOnCrossChain(routes[highlightedIndex])) {\n      return (\n        <Tooltip title=\"The selected route requires a swap on the chain you are tranferring to. You need to have gas on that chain to pay for the transaction there.\">\n          <Button disabled={true} shape=\"round\" type=\"primary\" size={'large'}>\n            Insufficient Gas on Destination Chain\n          </Button>\n        </Tooltip>\n      )\n    }\n    if (!hasSufficientBalance()) {\n      return (\n        <Button disabled={true} shape=\"round\" type=\"primary\" size={'large'}>\n          Insufficient Funds\n        </Button>\n      )\n    }\n\n    return (\n      <Button\n        disabled={highlightedIndex === -1}\n        shape=\"round\"\n        type=\"primary\"\n        icon={<SwapOutlined />}\n        size={'large'}\n        onClick={() => openModal()}>\n        Swap\n      </Button>\n    )\n  }\n\n  return (\n    <Content className=\"site-layout site-layout-swap\">\n      <div className=\"swap-view\">\n        {/* Historical Routes\n        {!!historicalRoutes.length && (\n          <Row justify={'center'} className=\"historicalTransfers\">\n            <Collapse\n              defaultActiveKey={['']}\n              ghost\n              bordered={false}\n              className={`active-transfer-collapse`}\n              style={{ overflowX: 'scroll' }}>\n              <Panel\n                header={`Historical Transfers (${historicalRoutes.length})`}\n                key=\"1\"\n                className=\"site-collapse-active-transfer-panel\">\n                <div>\n                  <TrasactionsTable\n                    routes={historicalRoutes}\n                    selectRoute={() => {}}\n                    deleteRoute={(route: RouteType) => {\n                      LiFi.stopExecution(route)\n                      deleteRoute(route)\n                      setHistoricalRoutes(readHistoricalRoutes())\n                    }}\n                    historical={true}></TrasactionsTable>\n                </div>\n              </Panel>\n            </Collapse>\n          </Row>\n        )} */}\n\n        {/* Active Routes */}\n        {!!activeRoutes.length && (\n          <Row justify={'center'} className=\"activeTransfers optionsPanel\">\n            <Collapse\n              defaultActiveKey={activeRoutes.length ? ['1'] : ['']}\n              ghost\n              bordered={false}\n              className={`active-transfer-collapse`}\n              style={{ overflowX: 'scroll' }}>\n              <Panel\n                header={`Active Transfers (${activeRoutes.length})`}\n                key=\"1\"\n                className=\"site-collapse-active-transfer-panel\">\n                <div>\n                  <TrasactionsTable\n                    routes={activeRoutes}\n                    selectRoute={(route: RouteType) => setSelectedRoute(route)}\n                    deleteRoute={(route: RouteType) => {\n                      LiFi.stopExecution(route)\n                      deleteRoute(route)\n                      setActiveRoutes(readActiveRoutes())\n                    }}></TrasactionsTable>\n                </div>\n              </Panel>\n            </Collapse>\n          </Row>\n        )}\n\n        {/* Swap Form */}\n        <Row justify={'center'}>\n          <Col\n            className={\n              'swap-form animate ' + (showRoutesable ? 'visually-hidden' : 'visually-visible')\n            }>\n            <Form>\n              <SwapForm\n                depositChain={fromChainKey}\n                setDepositChain={setFromChainKey}\n                depositToken={fromTokenAddress}\n                setDepositToken={setFromTokenAddress}\n                depositAmount={depositAmount}\n                setDepositAmount={setDepositAmount}\n                withdrawChain={toChainKey}\n                setWithdrawChain={setToChainKey}\n                withdrawToken={toTokenAddress}\n                setWithdrawToken={setToTokenAddress}\n                withdrawAmount={withdrawAmount}\n                setWithdrawAmount={setWithdrawAmount}\n                estimatedWithdrawAmount={getSelectedWithdraw().estimate}\n                estimatedMinWithdrawAmount={getSelectedWithdraw().min}\n                transferChains={transferChains}\n                tokens={tokens}\n                balances={balances}\n                allowSameChains={true}\n              />\n              <span>\n                {/* Advanced Options */}\n                <Row className=\"optionsPanel\" justify={'center'}>\n                  <Collapse ghost style={{ width: '100%' }}>\n                    <Collapse.Panel header={`Advanced Options`} key=\"1\">\n                      Slippage\n                      <div>\n                        <InputNumber\n                          defaultValue={optionSlippage}\n                          min={0}\n                          max={100}\n                          formatter={(value) => `${value}%`}\n                          parser={(value) => parseFloat(value ? value.replace('%', '') : '')}\n                          onChange={setOptionSlippage}\n                          style={{\n                            width: '100%',\n                          }}\n                        />\n                      </div>\n                      Infinite Approval\n                      <div>\n                        <Checkbox\n                          checked={optionInfiniteApproval}\n                          onChange={(e) => setOptionInfiniteApproval(e.target.checked)}\n                          disabled={true}>\n                          Activate Infinite Approval\n                        </Checkbox>\n                      </div>\n                      Bridges\n                      <div>\n                        <Select\n                          mode=\"multiple\"\n                          placeholder=\"Select enabled bridges\"\n                          value={optionEnabledBridges}\n                          onChange={setOptionEnabledBridges}\n                          style={{\n                            width: '100%',\n                          }}>\n                          {availableBridges.map((bridge) => (\n                            <Select.Option key={bridge} value={bridge}>\n                              {bridge}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </div>\n                      Exchanges\n                      <div>\n                        <Select\n                          mode=\"multiple\"\n                          placeholder=\"Select enabled exchanges\"\n                          value={optionEnabledExchanges}\n                          onChange={setOptionEnabledExchanges}\n                          style={{\n                            width: '100%',\n                          }}>\n                          {availableExchanges.map((exchange) => (\n                            <Select.Option key={exchange} value={exchange}>\n                              {exchange}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </div>\n                    </Collapse.Panel>\n                  </Collapse>\n                </Row>\n              </span>\n            </Form>\n          </Col>\n        </Row>\n\n        {/* Routes */}\n\n        <Row justify={'center'} className={showRoutesable ? 'visually-hidden' : 'visually-visible'}>\n          {/* 顯示推薦路由 */}\n          {routes.length > 0 && (\n            <Col className=\"suggestRoute\">\n              <div ref={routeCards}>\n                <Route\n                  key={0}\n                  route={routes[0]}\n                  selected={highlightedIndex === 0}\n                  onSelect={() => setHighlightedIndex(0)}\n                />\n              </div>\n            </Col>\n          )}\n\n          {/* loading */}\n          {routesLoading && (\n            <Col>\n              <Row gutter={[32, 62]} justify={'center'} style={{ marginTop: 40 }}>\n                <LoadingIndicator></LoadingIndicator>\n              </Row>\n            </Col>\n          )}\n        </Row>\n\n        <Row\n          className={\n            'allRoutes animate ' + (showRoutesable ? 'visually-visible' : 'visually-hidden')\n          }\n          justify={'center'}>\n          {routes.length > 0 && (\n            <Col>\n              <div\n                style={{ display: 'flex', flexDirection: 'column', overflowX: 'scroll' }}\n                ref={routeCards}>\n                {routes.map((route, index) => (\n                  <Route\n                    key={index}\n                    route={route}\n                    selected={highlightedIndex === index}\n                    onSelect={() => setHighlightedIndex(index)}\n                  />\n                ))}\n              </div>\n            </Col>\n          )}\n\n          {!routesLoading && noRoutesAvailable && (\n            <Col style={{ width: '50%' }} className=\"no-routes-found\">\n              <h3 style={{ textAlign: 'center' }}>No Route Found</h3>\n              <Typography.Text type=\"secondary\" style={{ textAlign: 'left' }}>\n                We couldn't find suitable routes for your desired transfer. We do have some\n                suggestions why that could be: <br />\n              </Typography.Text>\n              <Collapse ghost className=\"no-route-custom-collapse\">\n                <Panel header=\"A route for this transaction simply does not exist yet.\" key=\"1\">\n                  <p style={{ color: 'grey' }}>\n                    We are working hard on integrating more exchanges to find possible transactions\n                    for you! Look out for updates and try again later.\n                  </p>\n                </Panel>\n\n                <Panel header=\"You are not sending enough tokens - Try a greater amount.\" key=\"2\">\n                  <p style={{ color: 'grey' }}>\n                    Transactions cost money. These transaction costs are deducted from your swapping\n                    amount. If this amount is not enough to cover the expenses, we can not execute\n                    the transaction or compute routes.\n                  </p>\n                </Panel>\n              </Collapse>\n            </Col>\n          )}\n        </Row>\n      </div>\n\n      {selectedRoute && !!selectedRoute.steps.length && (\n        <Modal\n          className=\"swapModal\"\n          visible={selectedRoute.steps.length > 0}\n          onOk={() => {\n            setSelectedRoute(undefined)\n            updateBalances()\n          }}\n          onCancel={() => {\n            setSelectedRoute(undefined)\n            updateBalances()\n          }}\n          destroyOnClose={true}\n          width={700}\n          footer={null}>\n          <Swapping\n            route={selectedRoute}\n            updateRoute={() => {\n              setActiveRoutes(readActiveRoutes())\n              setHistoricalRoutes(readHistoricalRoutes())\n            }}\n            onSwapDone={() => {\n              setActiveRoutes(readActiveRoutes())\n              setHistoricalRoutes(readHistoricalRoutes())\n              updateBalances()\n            }}></Swapping>\n        </Modal>\n      )}\n\n      <div className=\"showOnBottom\">\n        <Col>\n          <Row style={{ marginTop: 24 }} justify={'center'}>\n            <Button\n              className={routes.length > 0 ? 'visually-visible' : 'visually-hidden'}\n              shape=\"round\"\n              size={'large'}\n              onClick={showRoutes}\n              style={{ marginLeft: 5, marginRight: 5 }}>\n              {showRoutesable ? 'Form' : 'Routes'}\n            </Button>\n\n            <div style={{ marginLeft: 5, marginRight: 5 }}>{submitButton()}</div>\n          </Row>\n        </Col>\n      </div>\n    </Content>\n  )\n}\n\nexport default Swap\n","import { Web3Provider } from '@ethersproject/providers'\nimport { useWeb3React } from '@web3-react/core'\nimport { useEffect } from 'react'\n\nimport { network } from './connectors'\nimport { useEagerConnect, useInactiveListener } from './hooks'\n\nfunction Web3ConnectionManager({ children }: { children: JSX.Element }) {\n  const web3 = useWeb3React<Web3Provider>()\n  const { connector, activate, active } = web3\n\n  // handle logic to eagerly connect to the injected ethereum provider, if it exists and has granted access already\n  const triedEager = useEagerConnect()\n\n  useEffect(() => {\n    if (triedEager && !active) {\n      activate(network)\n    }\n  }, [triedEager, active, connector, activate])\n\n  // handle logic to connect in reaction to certain events on the injected ethereum provider, if it exists\n  useInactiveListener(!triedEager)\n\n  return children\n}\n\nexport default Web3ConnectionManager\n","/* eslint-disable no-console */\nimport { useWeb3React } from '@web3-react/core'\nimport { useEffect, useState } from 'react'\n\nimport { isWalletDeactivated } from '../../services/utils'\nimport { getInjectedConnector, injected } from './connectors'\n\nexport function useEagerConnect() {\n  const { activate, active, deactivate } = useWeb3React()\n\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    const eagerConnect = async () => {\n      // get account if exists and check if in deactivated wallets. if in deactivated wallets don't activate library\n      // const accountAddress = await injected.getAccount()\n      const currentlySelectedUserAddress = (window as any).ethereum.selectedAddress\n      if (isWalletDeactivated(currentlySelectedUserAddress)) {\n        deactivate()\n        setTried(true)\n        return\n      }\n\n      if (await injected.isAuthorized()) {\n        activate(await getInjectedConnector(), undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        setTried(true)\n      }\n    }\n\n    // Run this on mount and every time the 'active' state changes.\n    // I.E: switches to chain that is not supported:\n    // This would cause the library to switch to inactive.\n    // getInjectedConnector() would fetch connectors for all supported Chains and the current unsupported one.\n    eagerConnect()\n  }, [activate, active])\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active])\n\n  return tried\n}\n\nexport function useInactiveListener(suppress = false) {\n  const { active, error, activate } = useWeb3React()\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { ethereum } = window as any // TODO: Fix typing\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = async () => {\n        console.log(\"Handling 'connect' event\")\n        activate(await getInjectedConnector())\n      }\n      const handleChainChanged = async (chainId: string | number) => {\n        console.log(\"Handling 'chainChanged' event with payload\", chainId)\n        activate(await getInjectedConnector())\n      }\n      const handleAccountsChanged = async (accounts: string[]) => {\n        console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n        if (accounts.length > 0) {\n          activate(await getInjectedConnector())\n        }\n      }\n      const handleNetworkChanged = async (networkId: string | number) => {\n        console.log(\"Handling 'networkChanged' event with payload\", networkId)\n        activate(await getInjectedConnector())\n      }\n\n      ethereum.on('connect', handleConnect)\n      ethereum.on('chainChanged', handleChainChanged)\n      ethereum.on('accountsChanged', handleAccountsChanged)\n      ethereum.on('networkChanged', handleNetworkChanged)\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener('connect', handleConnect)\n          ethereum.removeListener('chainChanged', handleChainChanged)\n          ethereum.removeListener('accountsChanged', handleAccountsChanged)\n          ethereum.removeListener('networkChanged', handleNetworkChanged)\n        }\n      }\n    }\n  }, [active, error, suppress, activate])\n}\n","import { Web3Provider } from '@ethersproject/providers'\nimport { Web3ReactProvider } from '@web3-react/core'\nimport React from 'react'\n\nfunction getLibrary(provider: any): Web3Provider {\n  const library = new Web3Provider(provider, 'any') // added \"any\" because of https://github.com/ethers-io/ethers.js/issues/866\n  library.pollingInterval = 12000\n  return library\n}\n\nfunction WrappedWeb3ReactProvider({ children }: { children: JSX.Element }) {\n  return <Web3ReactProvider getLibrary={getLibrary}>{children}</Web3ReactProvider>\n}\n\nexport default WrappedWeb3ReactProvider\n","const CLASS_NAME = 'metadata'\nconst head = document.querySelector('head')\n\nfunction getDefaultValues() {\n  // facebook size: 1200 x 630\n  const defaultImage = {\n    url: 'https://swap.dev.bitizen.org/webMetadata.png',\n    w: 900,\n    h: 450,\n  }\n  const data = {\n    title: 'BitizenWallet',\n    description: 'Providing liquidity when and where needed',\n    url: window.location.href,\n    image: defaultImage,\n    lang: 'en',\n    og: {\n      'og:type': 'website',\n      'og:site_name': 'BitizenWallet',\n    },\n    tags: {\n      'twitter:card': 'summary_large_image',\n      'twitter:site': '@lifiprotocol',\n    },\n    noIndex: false,\n    statusCode: 200,\n  }\n\n  return data\n}\n\nfunction updateMetaTags(data: any) {\n  // set url, title and description to all formats\n  data.tags['twitter:title'] = data.title\n  data.tags['twitter:description'] = data.description\n  data.og['og:url'] = data.url\n  data.og['og:title'] = data.title\n  data.og['og:description'] = data.description\n\n  // set image to all formats\n  data.tags['twitter:image'] = data.image.url\n  data.og['og:image'] = data.image.url\n  data.og['og:image:url'] = data.image.url\n  data.og['og:image:secure_url'] = data.image.url\n  data.og['og:image:width'] = data.image.w\n  data.og['og:image:height'] = data.image.h\n\n  // title and language can be changed directly. they don't need to be deleted beforehand\n  document.title = data.title\n  document.documentElement.lang = data.lang\n\n  // create new tags\n  var nodes: Array<any> = []\n  addMetaTag(nodes, 'description', data.description)\n  addCanonicalUrlTag(data.url, data.forcedLanguage, nodes)\n  addMetaTag(nodes, 'prerender-status-code', data.statusCode)\n  if (data.noIndex) {\n    addMetaTag(nodes, 'robots', 'noindex')\n  }\n\n  Object.keys(data.og).forEach((key: string) => {\n    addMetaTag(nodes, key, data.og[key], true)\n  })\n\n  Object.keys(data.tags).forEach((key: string) => {\n    addMetaTag(nodes, key, data.tags[key])\n  })\n\n  if (data.prerenderHeader) {\n    addMetaTag(nodes, 'prerender-header', data.prerenderHeader)\n  }\n\n  // update tags in DOM\n  removeAllTagsFromDOM()\n  addTagsToDOM(nodes)\n}\n\nfunction addTagsToDOM(nodes: Array<any>) {\n  head?.append(...nodes)\n}\n\nfunction removeAllTagsFromDOM() {\n  var toDelete = document.querySelectorAll(`.${CLASS_NAME}`)\n  toDelete.forEach((elm) => elm.remove())\n}\n\nfunction addCanonicalUrlTag(url: string, forcedLanguage: any, nodes: Array<any>) {\n  nodes.push(createLinkTag('alternate', url, 'x-default'))\n  nodes.push(createLinkTag('alternate', url, 'en'))\n\n  // When adding multiple languages use:\n  // var char = url.indexOf('?') === -1 ? '?' : '&';\n  // if (forcedLanguage) {\n  //   nodes.push(createLinkTag('canonical', url + char + 'lang=' + forcedLanguage));\n  // } else {\n  //   nodes.push(createLinkTag('canonical', url));\n  // }\n  // var languages = ['en']\n\n  // languages.forEach((lang) => {\n  //   nodes.push(createLinkTag('alternate', url + char + 'lang=' + lang, lang));\n  // })\n}\n\n// eslint-disable-next-line max-params\nfunction addMetaTag(\n  nodes: Array<any>,\n  name: string,\n  content: string,\n  propertyTag: boolean = false,\n) {\n  if (content) {\n    nodes.push(createMetaTag(name, content, propertyTag))\n  }\n}\n\nfunction createMetaTag(name: string, content: string, propertyTag: boolean = false) {\n  const tag = document.createElement('meta')\n  if (propertyTag) {\n    tag.setAttribute('property', name)\n  } else {\n    tag.setAttribute('name', name)\n  }\n  tag.setAttribute('content', content)\n  tag.setAttribute('class', CLASS_NAME)\n  return tag\n}\n\nfunction createLinkTag(rel: string, href: string, hreflang: string | null = null) {\n  const tag = document.createElement('link')\n  tag.setAttribute('class', CLASS_NAME)\n  tag.setAttribute('rel', rel)\n  tag.setAttribute('href', href)\n  if (hreflang) {\n    tag.setAttribute('hreflang', hreflang)\n  }\n  return tag\n}\n\nfunction setMetatags(data: any) {\n  const defaultValues = getDefaultValues()\n  const values = Object.assign({}, defaultValues, data)\n  updateMetaTags(values)\n}\n\nexport default setMetatags\n","import './App.css'\nimport './ThemePatch.css'\n\nimport { Button, Col, Layout, Menu, Row } from 'antd'\nimport { Content } from 'antd/lib/layout/layout'\nimport { useEffect, useState } from 'react'\nimport { HashRouter, Redirect, Route, Switch } from 'react-router-dom'\n\nimport NotFoundPage from './components/NotFoundPage'\nimport Swap from './components/Swap'\nimport WalletButtons from './components/web3/WalletButtons'\nimport Web3ConnectionManager from './components/web3/Web3ConnectionManager'\nimport WrappedWeb3ReactProvider from './components/web3/WrappedWeb3ReactProvider'\nimport setMetatags from './services/metatags'\nimport { getChainById } from './types'\n\nconst getTransferChains = (jsonArraySting: string) => {\n  try {\n    const chainIds = JSON.parse(jsonArraySting)\n    return chainIds.map(getChainById)\n  } catch (e) {\n    return []\n  }\n}\n\nfunction usePageViews() {\n  const [path, setPath] = useState<string>()\n\n  // eslint-disable-next-line no-console\n  console.log('path', path)\n\n  return path\n}\n\nfunction App() {\n  const path = usePageViews()\n\n  return (\n    <HashRouter>\n      <WrappedWeb3ReactProvider>\n        <Web3ConnectionManager>\n          <Layout>\n            <Content>\n              <Switch>\n                <Redirect exact from=\"/swap\" to=\"/\" />\n                <Route\n                  exact\n                  path=\"/\"\n                  render={() => {\n                    setMetatags({\n                      title: 'Swap',\n                    })\n\n                    const transferChains = getTransferChains(\n                      process.env.REACT_APP_LIFI_ENABLED_CHAINS_JSON!,\n                    )\n                    return (\n                      <div className=\"lifiWrap\">\n                        <Swap transferChains={transferChains} />\n                      </div>\n                    )\n                  }}\n                />\n                <Route\n                  exact\n                  path=\"/testnet\"\n                  render={() => {\n                    setMetatags({\n                      title: 'Testnet',\n                    })\n                    const transferChains = getTransferChains(\n                      process.env.REACT_APP_LIFI_ENABLED_CHAINS_TESTNET_JSON!,\n                    )\n                    return (\n                      <div className=\"lifiWrap\">\n                        <Swap transferChains={transferChains} />\n                      </div>\n                    )\n                  }}\n                />\n                <Route\n                  path=\"*\"\n                  render={() => {\n                    setMetatags({\n                      title: 'Not Found',\n                      status: 404,\n                    })\n                    return <NotFoundPage />\n                  }}\n                />\n              </Switch>\n            </Content>\n          </Layout>\n        </Web3ConnectionManager>\n      </WrappedWeb3ReactProvider>\n    </HashRouter>\n  )\n}\n\nexport { App }\n","export * from './defaultToken.types'\nexport * from './internal.types'\nexport * from '@lifinance/sdk'\n","import { ChainId, ChainKey, CoinKey, findDefaultToken, Token } from '@lifinance/sdk'\n\nexport const defaultTokens: { [ChainKey: string]: Array<Token> } = {\n  [ChainKey.ETH]: [\n    findDefaultToken(CoinKey.ETH, ChainId.ETH),\n    findDefaultToken(CoinKey.USDC, ChainId.ETH),\n    findDefaultToken(CoinKey.USDT, ChainId.ETH),\n    findDefaultToken(CoinKey.MATIC, ChainId.ETH),\n    findDefaultToken(CoinKey.WBTC, ChainId.ETH),\n\n    // Partners\n    // > MAGIC: https://etherscan.io/token/0xb0c7a3ba49c7a6eaba6cd4a96c55a1391070ac9a\n    {\n      address: '0xb0c7a3ba49c7a6eaba6cd4a96c55a1391070ac9a',\n      chainId: ChainId.ETH,\n      decimals: 18,\n      logoURI:\n        'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/arbitrum/assets/0x539bdE0d7Dbd336b79148AA742883198BBF60342/logo.png',\n      name: 'MAGIC',\n      symbol: 'MAGIC',\n    },\n\n    // ADDED TOKEN FOR MARKETING PURPOSES\n    // > LOOKS: https://etherscan.io/token/0xf4d2888d29D722226FafA5d9B24F9164c092421E\n    {\n      address: '0xf4d2888d29D722226FafA5d9B24F9164c092421E',\n      chainId: ChainId.ETH,\n      decimals: 18,\n      logoURI: 'https://etherscan.io/token/images/looksrare_32.png',\n      name: 'LooksRare',\n      symbol: 'LOOKS',\n    },\n\n    // > METIS: https://etherscan.io/token/0x9e32b13ce7f2e80a01932b42553652e053d6ed8e\n    {\n      address: '0x9e32b13ce7f2e80a01932b42553652e053d6ed8e',\n      chainId: ChainId.ETH,\n      decimals: 18,\n      logoURI: 'https://assets.coingecko.com/coins/images/15595/small/metis.PNG',\n      name: 'Metis Token',\n      symbol: 'Metis',\n    },\n  ],\n  [ChainKey.BSC]: [\n    findDefaultToken(CoinKey.BNB, ChainId.BSC),\n    findDefaultToken(CoinKey.USDC, ChainId.BSC),\n    findDefaultToken(CoinKey.USDT, ChainId.BSC),\n    findDefaultToken(CoinKey.DAI, ChainId.BSC),\n    // findDefaultToken(CoinKey.WBTC, ChainId.BSC),\n\n    // Partners\n    // > METIS: https://bscscan.com/token/0xe552fb52a4f19e44ef5a967632dbc320b0820639\n    {\n      address: '0xe552fb52a4f19e44ef5a967632dbc320b0820639',\n      chainId: ChainId.BSC,\n      decimals: 18,\n      logoURI: 'https://assets.coingecko.com/coins/images/15595/small/metis.PNG',\n      name: 'Metis Token',\n      symbol: 'Metis',\n    },\n\n    // ADDED TOKEN FOR MARKETING PURPOSES\n    // > BOLE: https://bscscan.com/token/0x3375AfA606F5836154C95F1Df5830EA2e4F41DF2\n    {\n      address: '0x3375AfA606F5836154C95F1Df5830EA2e4F41DF2',\n      chainId: ChainId.BSC,\n      decimals: 18,\n      logoURI: 'https://bscscan.com/token/images/boleinc_32.png',\n      name: 'BoleToken',\n      symbol: 'BOLE',\n    },\n\n    // ADDED TOKEN FOR MARKETING PURPOSES\n    // > Dinoland Metaverse: https://bscscan.com/token/0x6B9481FB5465ef9Ab9347b332058D894aB09B2f6\n    {\n      address: '0x6B9481FB5465ef9Ab9347b332058D894aB09B2f6',\n      chainId: ChainId.BSC,\n      decimals: 18,\n      logoURI: 'https://bscscan.com/token/images/dinoland_32.png',\n      name: 'Dinoland Metaverse',\n      symbol: 'DNL',\n    },\n  ],\n  [ChainKey.POL]: [\n    findDefaultToken(CoinKey.MATIC, ChainId.POL),\n    findDefaultToken(CoinKey.USDC, ChainId.POL),\n    findDefaultToken(CoinKey.USDT, ChainId.POL),\n    findDefaultToken(CoinKey.DAI, ChainId.POL),\n    findDefaultToken(CoinKey.WBTC, ChainId.POL),\n\n    // Partners\n    // > MIVA:\n    {\n      name: 'Minerva Wallet SuperToken',\n      symbol: 'MIVA',\n      coinKey: 'MIVA' as CoinKey,\n      decimals: 18,\n      chainId: ChainId.POL,\n      logoURI: 'https://minerva.digital/i/MIVA-Token_200x200.png',\n      address: '0xc0b2983a17573660053beeed6fdb1053107cf387',\n    },\n    {\n      name: 'Own a fraction',\n      symbol: 'FRACTION',\n      coinKey: 'FRACTION' as CoinKey,\n      decimals: 18,\n      chainId: ChainId.POL,\n      logoURI: 'https://assets.coingecko.com/coins/images/15099/large/fraction.png?1619691519',\n      address: '0xbd80cfa9d93a87d1bb895f810ea348e496611cd4',\n    },\n    // RAIDER\n    {\n      name: 'Crypto Raiders',\n      symbol: 'RAIDER',\n      coinKey: 'RAIDER' as CoinKey,\n      decimals: 18,\n      chainId: ChainId.POL,\n      logoURI: 'https://assets.coingecko.com/coins/images/17638/small/Ue3Hfh8.png?1630737936',\n      address: '0xcd7361ac3307d1c5a46b63086a90742ff44c63b3',\n    },\n  ],\n  [ChainKey.DAI]: [\n    findDefaultToken(CoinKey.DAI, ChainId.DAI),\n    findDefaultToken(CoinKey.USDC, ChainId.DAI),\n    findDefaultToken(CoinKey.USDT, ChainId.DAI),\n    findDefaultToken(CoinKey.MATIC, ChainId.DAI),\n    findDefaultToken(CoinKey.WBTC, ChainId.DAI),\n\n    // Partners\n    // > MIVA:\n    {\n      name: 'Minerva Wallet SuperToken',\n      symbol: 'MIVA',\n      coinKey: 'MIVA' as CoinKey,\n      decimals: 18,\n      chainId: ChainId.DAI,\n      logoURI: 'https://minerva.digital/i/MIVA-Token_200x200.png',\n      address: '0x63e62989d9eb2d37dfdb1f93a22f063635b07d51',\n    },\n    {\n      name: 'Own a fraction',\n      symbol: 'FRACTION',\n      coinKey: 'FRACTION' as CoinKey,\n      decimals: 18,\n      chainId: ChainId.DAI,\n      logoURI: 'https://assets.coingecko.com/coins/images/15099/large/fraction.png?1619691519',\n      address: '0x2bf2ba13735160624a0feae98f6ac8f70885ea61',\n    },\n  ],\n  [ChainKey.FTM]: [\n    findDefaultToken(CoinKey.FTM, ChainId.FTM),\n    findDefaultToken(CoinKey.USDC, ChainId.FTM),\n    findDefaultToken(CoinKey.USDT, ChainId.FTM),\n    findDefaultToken(CoinKey.DAI, ChainId.FTM),\n    findDefaultToken(CoinKey.WBTC, ChainId.FTM),\n\n    //For marketing 0xDAO token\n    {\n      address: '0xc165d941481e68696f43ee6e99bfb2b23e0e3114',\n      chainId: ChainId.FTM,\n      decimals: 18,\n      logoURI:\n        ' https://assets.coingecko.com/coins/images/22888/small/rjks-OoT_400x400.jpg?1642827011 ',\n      name: '0xDAO',\n      symbol: 'OXD',\n    },\n\n    // Partners - for marketing purposes\n    // > TOMB: https://ftmscan.com/token/0x6c021Ae822BEa943b2E66552bDe1D2696a53fbB7\n    {\n      address: '0x6c021Ae822BEa943b2E66552bDe1D2696a53fbB7',\n      chainId: ChainId.FTM,\n      decimals: 18,\n      logoURI: 'https://ftmscan.com/token/images/tomb_32.png',\n      name: 'TOMB',\n      symbol: 'TOMB',\n    },\n  ],\n  [ChainKey.ARB]: [\n    findDefaultToken(CoinKey.ETH, ChainId.ARB),\n    findDefaultToken(CoinKey.USDC, ChainId.ARB),\n    findDefaultToken(CoinKey.USDT, ChainId.ARB),\n    findDefaultToken(CoinKey.DAI, ChainId.ARB),\n    findDefaultToken(CoinKey.WBTC, ChainId.ARB),\n\n    // Partners\n    // > MAGIC\n    {\n      address: '0x539bdE0d7Dbd336b79148AA742883198BBF60342',\n      chainId: ChainId.ARB,\n      decimals: 18,\n      logoURI:\n        'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/arbitrum/assets/0x539bdE0d7Dbd336b79148AA742883198BBF60342/logo.png',\n      name: 'MAGIC',\n      symbol: 'MAGIC',\n    },\n  ],\n  [ChainKey.OPT]: [\n    findDefaultToken(CoinKey.ETH, ChainId.OPT),\n    findDefaultToken(CoinKey.USDC, ChainId.OPT),\n    findDefaultToken(CoinKey.USDT, ChainId.OPT),\n    findDefaultToken(CoinKey.DAI, ChainId.OPT),\n    findDefaultToken(CoinKey.WBTC, ChainId.OPT),\n  ],\n  [ChainKey.ONE]: [\n    findDefaultToken(CoinKey.ONE, ChainId.ONE),\n    findDefaultToken(CoinKey.BNB, ChainId.ONE),\n    findDefaultToken(CoinKey.ETH, ChainId.ONE),\n    findDefaultToken(CoinKey.WBTC, ChainId.ONE),\n  ],\n  [ChainKey.AVA]: [\n    findDefaultToken(CoinKey.AVAX, ChainId.AVA),\n    findDefaultToken(CoinKey.USDC, ChainId.AVA),\n    findDefaultToken(CoinKey.USDT, ChainId.AVA),\n    findDefaultToken(CoinKey.DAI, ChainId.AVA),\n    findDefaultToken(CoinKey.WBTC, ChainId.AVA),\n\n    // ADDED TOKEN FOR MARKETING PURPOSES\n    // > Defrost Finance Token: https://snowtrace.io/token/0x47EB6F7525C1aA999FBC9ee92715F5231eB1241D\n    {\n      address: '0x47EB6F7525C1aA999FBC9ee92715F5231eB1241D',\n      chainId: ChainId.AVA,\n      decimals: 18,\n      logoURI: 'https://snowtrace.io/token/images/defrostfinance_32.png',\n      name: 'Defrost Finance Token',\n      symbol: 'MELT',\n    },\n  ],\n  [ChainKey.MOR]: [\n    findDefaultToken(CoinKey.MOVR, ChainId.MOR),\n    findDefaultToken(CoinKey.USDC, ChainId.MOR),\n    findDefaultToken(CoinKey.USDT, ChainId.MOR),\n    // findDefaultToken(CoinKey.WBTC, ChainId.MOR),\n  ],\n  [ChainKey.OKT]: [\n    findDefaultToken(CoinKey.OKT, ChainId.OKT),\n    findDefaultToken(CoinKey.USDC, ChainId.OKT),\n    findDefaultToken(CoinKey.USDT, ChainId.OKT),\n  ],\n  [ChainKey.HEC]: [\n    findDefaultToken(CoinKey.HT, ChainId.HEC),\n    findDefaultToken(CoinKey.USDC, ChainId.HEC),\n    findDefaultToken(CoinKey.USDT, ChainId.HEC),\n  ],\n\n  // Testnet\n  [ChainKey.GOR]: [\n    findDefaultToken(CoinKey.ETH, ChainId.GOR),\n    findDefaultToken(CoinKey.TEST, ChainId.GOR),\n    findDefaultToken(CoinKey.USDC, ChainId.GOR),\n    // findDefaultToken(CoinKey.USDT, ChainId.GOR),\n    findDefaultToken(CoinKey.DAI, ChainId.GOR),\n  ],\n  [ChainKey.RIN]: [\n    findDefaultToken(CoinKey.ETH, ChainId.RIN),\n    findDefaultToken(CoinKey.TEST, ChainId.RIN),\n    findDefaultToken(CoinKey.USDC, ChainId.RIN),\n    findDefaultToken(CoinKey.USDT, ChainId.RIN),\n    findDefaultToken(CoinKey.DAI, ChainId.RIN),\n  ],\n  [ChainKey.ROP]: [\n    findDefaultToken(CoinKey.ETH, ChainId.ROP),\n    findDefaultToken(CoinKey.TEST, ChainId.ROP),\n    findDefaultToken(CoinKey.USDC, ChainId.ROP),\n    findDefaultToken(CoinKey.USDT, ChainId.ROP),\n    findDefaultToken(CoinKey.DAI, ChainId.ROP),\n  ],\n  [ChainKey.KOV]: [findDefaultToken(CoinKey.ETH, ChainId.KOV)],\n  [ChainKey.MUM]: [\n    findDefaultToken(CoinKey.MATIC, ChainId.MUM),\n    findDefaultToken(CoinKey.TEST, ChainId.MUM),\n    findDefaultToken(CoinKey.USDC, ChainId.MUM),\n    // findDefaultToken(CoinKey.USDT, ChainId.MUM),\n    findDefaultToken(CoinKey.DAI, ChainId.MUM),\n  ],\n  [ChainKey.BSCT]: [findDefaultToken(CoinKey.BNB, ChainId.BSCT)],\n  [ChainKey.ONET]: [\n    findDefaultToken(CoinKey.ONE, ChainId.ONET),\n    findDefaultToken(CoinKey.ETH, ChainId.ONET),\n    findDefaultToken(CoinKey.BNB, ChainId.ONET),\n  ],\n}\n","import {\n  ChainKey,\n  Coin,\n  StepTool,\n  supportedBridges,\n  supportedExchangeAggregators,\n  supportedExchanges,\n  TokenAmount,\n} from '@lifinance/sdk'\nimport { TableColumnType } from 'antd'\nimport BigNumber from 'bignumber.js'\n\nexport interface Amounts {\n  amount_coin: BigNumber\n  amount_usd: BigNumber\n}\n\nexport interface DataType {\n  [key: string]: string | number | Amounts | Coin // kind of deactivating typing for DataType; last resort?\n  key: React.Key\n  coin: Coin\n  portfolio: Amounts\n}\n\nexport function chainKeysToObject(val: any) {\n  const result: { [ChainKey: string]: any } = {}\n  for (const key in ChainKey) {\n    result[key.toLowerCase()] = JSON.parse(JSON.stringify(val))\n  }\n  return result\n}\n\nexport interface ColomnType extends TableColumnType<DataType> {\n  children?: Array<ColomnType>\n}\n\nexport interface Wallet {\n  address: string\n  loading: boolean\n  portfolio: { [ChainKey: string]: Array<TokenAmount> }\n}\n\nexport enum Currencies {\n  USD = 'usd',\n  EUR = 'eur',\n}\n\nexport interface SummaryAmounts {\n  amount_usd: BigNumber\n  percentage_of_portfolio: BigNumber\n}\n\nexport interface WalletSummary {\n  wallet: string\n  chains: {\n    [ChainKey: string]: SummaryAmounts\n  }\n}\n\nexport const findTool = (toolKey: StepTool) => {\n  const allTools = [...supportedExchanges, ...supportedExchangeAggregators, ...supportedBridges]\n  const tool = allTools.find((tool) => tool.key === toolKey)\n  return tool\n}\n"],"sourceRoot":""}